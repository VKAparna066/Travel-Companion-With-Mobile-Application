<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TravelPal - AI Travel Companion</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4361ee;
            --primary-dark: #3a0ca3;
            --secondary: #4cc9f0;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4ade80;
            --warning: #f59e0b;
            --danger: #ef4444;
            --gray: #6b7280;
            --card-bg: rgba(255, 255, 255, 0.1);
            --sidebar-width: 280px;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--light);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .app-container {
            width: 100%;
            max-width: 1200px;
            height: 90vh;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            display: flex;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Login Screen */
        .login-screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 40px;
            border-radius: 25px;
        }

        .login-form, .signup-form {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .login-form h2, .signup-form h2 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            font-size: 16px;
            outline: none;
        }

        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .login-btn {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            border: none;
            background: var(--accent);
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .login-btn:hover {
            background: #e11574;
            transform: translateY(-2px);
        }

        .login-footer {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
        }

        .login-footer a {
            color: var(--secondary);
            text-decoration: none;
            cursor: pointer;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: rgba(0, 0, 0, 0.2);
            padding: 25px 20px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .app-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
            font-size: 24px;
            font-weight: 700;
        }

        .app-logo i {
            color: var(--accent);
        }

        .nav-menu {
            flex: 1;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 8px;
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.15);
        }

        .nav-item:hover:not(.active) {
            background: rgba(255, 255, 255, 0.08);
        }

        .nav-item i {
            font-size: 20px;
            width: 24px;
            text-align: center;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            margin-top: 20px;
            position: relative;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--primary));
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 20px;
        }

        .user-info h3 {
            font-size: 16px;
            margin-bottom: 4px;
        }

        .user-info p {
            font-size: 13px;
            opacity: 0.8;
        }

        .logout-btn {
            position: absolute;
            right: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .search-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }

        .search-bar input {
            flex: 1;
            padding: 15px 20px;
            border-radius: 50px;
            border: none;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            font-size: 16px;
            outline: none;
        }

        .search-bar input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .search-bar button {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            border: none;
            background: var(--accent);
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .search-bar button:hover {
            transform: scale(1.05);
        }

        .dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            flex: 1;
        }

        .dashboard-left {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .dashboard-right {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .section-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .section-title h2 {
            font-size: 22px;
            font-weight: 600;
        }

        .section-title a {
            color: var(--accent);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
        }

        .weather-widget {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }

        .weather-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .weather-info h3 {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .weather-info p {
            font-size: 14px;
            opacity: 0.8;
        }

        .weather-icon {
            font-size: 40px;
            color: var(--warning);
        }

        .weather-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .weather-detail {
            text-align: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .weather-detail p:first-child {
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .weather-detail p:last-child {
            font-size: 16px;
            font-weight: 600;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .feature-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .feature-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            border-radius: 18px;
            background: var(--primary);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .feature-card:nth-child(2) .feature-icon {
            background: var(--accent);
        }

        .feature-card:nth-child(3) .feature-icon {
            background: var(--success);
        }

        .feature-card:nth-child(4) .feature-icon {
            background: var(--warning);
        }

        .feature-card h3 {
            font-size: 15px;
            font-weight: 600;
        }

        .trips-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .trip-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            display: flex;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .trip-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
        }

        .trip-image {
            width: 80px;
            height: 80px;
            border-radius: 15px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 28px;
            flex-shrink: 0;
        }

        .trip-info {
            flex: 1;
        }

        .trip-info h3 {
            font-size: 18px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .trip-info p {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .trip-meta {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            opacity: 0.8;
        }

        .trip-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .ai-assistant {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .ai-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .ai-header h3 {
            font-size: 18px;
        }

        .ai-chat {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            height: 200px;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .chat-message {
            margin-bottom: 10px;
            padding: 10px 15px;
            border-radius: 15px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .chat-message.ai {
            background: rgba(67, 97, 238, 0.2);
            border-bottom-left-radius: 5px;
        }

        .chat-message.user {
            background: rgba(247, 37, 133, 0.2);
            border-bottom-right-radius: 5px;
            margin-left: auto;
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            outline: none;
        }

        .chat-input button {
            width: 50px;
            border-radius: 10px;
            border: none;
            background: var(--accent);
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .emergency-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .emergency-button {
            display: block;
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.3);
            transition: all 0.3s ease;
            margin-bottom: 15px;
        }

        .emergency-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.4);
        }

        .emergency-contacts {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .emergency-contact {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .emergency-contact:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .emergency-contact i {
            font-size: 20px;
            margin-bottom: 5px;
            color: var(--danger);
        }

        .emergency-contact p {
            font-size: 12px;
        }

        /* NEW FEATURES */
        .currency-converter {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .converter-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .converter-header h3 {
            font-size: 18px;
        }

        .converter-inputs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .converter-inputs input, .converter-inputs select {
            flex: 1;
            padding: 12px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            outline: none;
        }

        .converter-inputs select option {
            background: #2a2a3a;
            color: white;
        }

        .converter-result {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .converter-actions {
            display: flex;
            gap: 10px;
        }

        .converter-actions button {
            flex: 1;
            padding: 10px;
            border-radius: 10px;
            border: none;
            background: var(--primary);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .converter-actions button:hover {
            background: var(--primary-dark);
        }

        .local-insights {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .insights-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .insights-header h3 {
            font-size: 18px;
        }

        .insight-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .insight-item i {
            color: var(--secondary);
        }

        .packing-assistant {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .packing-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .packing-header h3 {
            font-size: 18px;
        }

        .packing-list {
            max-height: 150px;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .packing-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin-bottom: 5px;
        }

        .packing-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .packing-done-btn {
            width: 100%;
            padding: 12px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .packing-done-btn:hover {
            background: #3ecf7f;
            transform: translateY(-2px);
        }

        /* NEW FEATURES ADDED */
        .travel-timeline {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .timeline-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .timeline-header h3 {
            font-size: 18px;
        }

        .timeline {
            position: relative;
            padding-left: 30px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--accent);
        }

        .timeline-event {
            position: relative;
            margin-bottom: 20px;
        }

        .timeline-event::before {
            content: '';
            position: absolute;
            left: -25px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--secondary);
        }

        .timeline-event h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .timeline-event p {
            font-size: 14px;
            opacity: 0.8;
        }

        .photo-gallery {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .gallery-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .gallery-header h3 {
            font-size: 18px;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .gallery-item {
            aspect-ratio: 1;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .gallery-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        .travel-budget {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .budget-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .budget-header h3 {
            font-size: 18px;
        }

        .budget-category {
            margin-bottom: 15px;
        }

        .budget-category-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .budget-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .budget-progress {
            height: 100%;
            background: var(--success);
            border-radius: 4px;
        }

        .budget-summary {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .travel-checklist {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .checklist-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .checklist-header h3 {
            font-size: 18px;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin-bottom: 5px;
        }

        .checklist-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        /* NEW FEATURES */
        .travel-map {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .map-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .map-header h3 {
            font-size: 18px;
        }

        .map-container {
            width: 100%;
            height: 150px;
            border-radius: 10px;
            overflow: hidden;
        }

        .map-placeholder {
            height: 100%;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            cursor: pointer;
        }

        .travel-expenses {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .expenses-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .expenses-header h3 {
            font-size: 18px;
        }

        .expense-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .expense-category {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .expense-amount {
            font-weight: bold;
        }

        /* NEW STYLES FOR ENHANCED FEATURES */
        
        /* Tourist Places Styles */
        .places-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .place-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .place-card:hover {
            transform: translateY(-5px);
        }
        
        .place-image {
            height: 160px;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .place-info {
            padding: 15px;
        }
        
        .place-info h3 {
            margin-bottom: 8px;
            font-size: 18px;
        }
        
        .place-info p {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        
        .place-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }
        
        .place-rating i {
            color: var(--warning);
        }
        
        /* Interactive Map Styles */
        .interactive-map {
            height: 400px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            margin-top: 20px;
        }
        
        .map-overlay {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 10px;
            z-index: 10;
        }
        
        .map-controls {
            display: flex;
            gap: 10px;
        }
        
        .map-control {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .map-control:hover {
            background: var(--primary-dark);
        }
        
        /* Emergency Assistance Styles */
        .emergency-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .emergency-modal-content {
            width: 100%;
            max-width: 500px;
            background: rgba(30, 30, 40, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 25px;
            color: white;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-height: 85vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .emergency-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .emergency-option {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .emergency-option:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
        }
        
        .emergency-option i {
            font-size: 30px;
            margin-bottom: 10px;
            color: var(--danger);
        }
        
        .sos-button {
            display: block;
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.3);
            transition: all 0.3s ease;
            margin-top: 20px;
            animation: pulse 1.5s infinite;
        }
        
        .sos-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.4);
        }
        
        /* Budget Update Styles */
        .budget-update-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }
        
        .budget-category-input {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .budget-input-group {
            display: flex;
            gap: 10px;
        }
        
        .budget-input-group input {
            flex: 1;
            padding: 12px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            outline: none;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 100;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content {
            width: 100%;
            max-width: 500px;
            background: rgba(30, 30, 40, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 25px;
            color: white;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-height: 85vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-header h2 {
            font-size: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .modal-body {
            flex: 1;
            overflow-y: auto;
            padding-right: 5px;
        }

        .modal-body::-webkit-scrollbar {
            width: 5px;
        }

        .modal-body::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }

        .feature-detail {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .feature-detail h3 {
            font-size: 18px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--secondary);
        }

        .feature-detail p {
            font-size: 14px;
            line-height: 1.6;
            opacity: 0.9;
        }

        .action-button {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
        }

        .mood-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .mood-option {
            flex: 1;
            min-width: 80px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mood-option:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .mood-option.selected {
            background: var(--primary);
        }

        .mood-option i {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .mood-option p {
            font-size: 12px;
        }

        .plan-day {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .plan-day h4 {
            margin-bottom: 10px;
            color: var(--secondary);
        }

        .expense-total {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            font-weight: bold;
            margin-top: 15px;
        }

        .local-guides {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }

        .local-guide {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .local-guide:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .guide-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent);
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }

        .expense-tracker {
            margin-bottom: 15px;
        }

        .expense-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .voice-command {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .voice-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--accent);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .voice-btn.listening {
            animation: pulse 1.5s infinite;
            background: var(--danger);
        }

        .voice-status {
            text-align: center;
            font-size: 14px;
            opacity: 0.8;
        }

        /* Trip Planner Form Styles */
        .trip-planner-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-row {
            display: flex;
            gap: 10px;
        }

        .form-group {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
        }

        .form-group input, .form-group select, .form-group textarea {
            padding: 12px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            outline: none;
            font-size: 14px;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-group input::placeholder, .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .preferences-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .preference-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .preference-option:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .preference-option.selected {
            background: var(--primary);
        }

        .preference-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .tag {
            display: inline-block;
            padding: 5px 10px;
            background: rgba(76, 201, 240, 0.2);
            color: var(--secondary);
            border-radius: 20px;
            font-size: 12px;
            margin-right: 5px;
            margin-bottom: 5px;
        }

        /* Screen-specific styles */
        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        /* Google Maps Styles */
        .google-map {
            width: 100%;
            height: 100%;
            border-radius: 10px;
            overflow: hidden;
        }

        /* NEW: Search Results Styles */
        .search-results {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .search-results.active {
            display: block;
        }

        .search-results-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .search-results-header h3 {
            font-size: 18px;
        }

        .search-results-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }

        .search-result-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-result-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }

        .search-result-item h4 {
            font-size: 16px;
            margin-bottom: 8px;
        }

        .search-result-item p {
            font-size: 14px;
            opacity: 0.9;
            line-height: 1.4;
        }

        .search-result-item .tag {
            display: inline-block;
            padding: 3px 8px;
            background: rgba(76, 201, 240, 0.2);
            color: var(--secondary);
            border-radius: 15px;
            font-size: 11px;
            margin-right: 5px;
            margin-top: 8px;
        }

        /* NEW: Place Details Modal */
        .place-details-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .place-details-content {
            width: 100%;
            max-width: 800px;
            background: rgba(30, 30, 40, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 25px;
            color: white;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-height: 85vh;
            overflow-y: auto;
        }

        .place-details-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .place-details-header h2 {
            font-size: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .place-details-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .place-image-large {
            height: 250px;
            border-radius: 15px;
            background-size: cover;
            background-position: center;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 48px;
        }

        .place-info-detailed {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .place-rating-detailed {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .place-rating-detailed i {
            color: var(--warning);
        }

        .place-description {
            font-size: 14px;
            line-height: 1.6;
            opacity: 0.9;
        }

        .place-features {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .place-feature {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            font-size: 12px;
        }

        .place-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        /* NEW: Destination Input Styles */
        .destination-input {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .destination-input input {
            flex: 1;
            padding: 12px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            outline: none;
        }

        .destination-input button {
            padding: 12px 20px;
            border-radius: 10px;
            border: none;
            background: var(--accent);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .destination-input button:hover {
            background: #e11574;
        }

        /* NEW: Expense History Styles */
        .expense-history {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            max-height: 200px;
            overflow-y: auto;
        }

        .expense-history-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .expense-history-header h3 {
            font-size: 18px;
        }

        .expense-history-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .expense-history-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .expense-history-category {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .expense-history-amount {
            font-weight: bold;
        }

        /* NEW: Booking Section Styles */
        .booking-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .booking-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .booking-header h3 {
            font-size: 18px;
        }

        .booking-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }

        .booking-option {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .booking-option:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }

        .booking-option i {
            font-size: 30px;
            margin-bottom: 10px;
            color: var(--secondary);
        }

        .booking-option h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .booking-option p {
            font-size: 12px;
            opacity: 0.8;
        }

        /* NEW: Hotel Booking Styles */
        .hotel-booking {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .hotel-booking-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .hotel-booking-header h3 {
            font-size: 18px;
        }

        .hotel-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .hotel-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .hotel-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .hotel-info {
            display: flex;
            gap: 15px;
        }

        .hotel-image {
            width: 80px;
            height: 80px;
            border-radius: 10px;
            background: var(--primary);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .hotel-details {
            flex: 1;
        }

        .hotel-details h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .hotel-details p {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .hotel-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }

        .hotel-rating i {
            color: var(--warning);
        }

        .hotel-price {
            font-weight: bold;
            font-size: 16px;
            margin-top: 10px;
        }

        .book-now-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .book-now-btn:hover {
            background: #e11574;
            transform: translateY(-2px);
        }

        /* NEW: Filter and Sort Styles */
        .filter-section {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-select {
            padding: 10px 15px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            outline: none;
            min-width: 150px;
        }
        
        .filter-select option {
            background: #2a2a3a;
            color: white;
        }
        
        .filter-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .filter-tag {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .filter-tag.active {
            background: var(--primary);
        }
        
        /* Transport Options */
        .transport-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .transport-option {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .transport-option:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }
        
        .transport-option i {
            font-size: 30px;
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        .transport-option h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .transport-option p {
            font-size: 12px;
            opacity: 0.8;
        }
        
        /* Flight Booking */
        .flight-search {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .flight-search-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .flight-search-header h3 {
            font-size: 18px;
        }
        
        .flight-form {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .flight-form input, .flight-form select {
            padding: 12px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            outline: none;
        }
        
        .flight-results {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .flight-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .flight-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .flight-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .flight-price {
            font-weight: bold;
            font-size: 18px;
        }
        
        /* Enhanced AI Chat */
        .ai-suggestions {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .ai-suggestion {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .ai-suggestion:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        /* Enhanced Settings */
        .settings-group {
            margin-bottom: 20px;
        }
        
        .settings-group h3 {
            margin-bottom: 10px;
            font-size: 18px;
            color: var(--secondary);
        }
        
        /* SOS Button Animation */
        @keyframes sosPulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 15px rgba(239, 68, 68, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        
        .sos-active {
            animation: sosPulse 2s infinite;
        }

        /* NEW AI ENHANCEMENTS */
        .ai-recommendations {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .recommendation-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .recommendation-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .recommendation-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: var(--primary);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
        }
        
        .recommendation-content h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .recommendation-content p {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .ai-insights {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .insight-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .insight-card h4 {
            font-size: 16px;
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        .insight-card p {
            font-size: 14px;
            line-height: 1.5;
            opacity: 0.9;
        }
        
        .ai-prediction {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .prediction-chart {
            height: 120px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin: 15px 0;
            display: flex;
            align-items: flex-end;
            padding: 10px;
            gap: 10px;
        }
        
        .prediction-bar {
            flex: 1;
            background: var(--primary);
            border-radius: 5px 5px 0 0;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .prediction-bar:hover {
            background: var(--secondary);
        }
        
        .prediction-label {
            position: absolute;
            bottom: -25px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 12px;
        }
        
        .prediction-value {
            position: absolute;
            top: -25px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .ai-personalization {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .preference-slider {
            margin-bottom: 15px;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .slider-container {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            position: relative;
        }
        
        .slider-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 3px;
            width: 70%;
        }
        
        .slider-thumb {
            width: 20px;
            height: 20px;
            background: var(--accent);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: 70%;
            cursor: pointer;
        }
        
        /* NEW FEATURES */
        .travel-mood {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .mood-emojis {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        
        .mood-emoji {
            font-size: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 10px;
            border-radius: 50%;
        }
        
        .mood-emoji:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.2);
        }
        
        .mood-emoji.selected {
            background: var(--primary);
            transform: scale(1.2);
        }
        
        .travel-journal {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .journal-entry {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .journal-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .journal-date {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .journal-location {
            font-size: 14px;
            color: var(--secondary);
        }
        
        .journal-content {
            font-size: 14px;
            line-height: 1.5;
        }
        
        .travel-challenges {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .challenge-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .challenge-progress {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: conic-gradient(var(--success) 75%, rgba(255,255,255,0.1) 0);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
            font-weight: bold;
        }
        
        .challenge-info {
            flex: 1;
        }
        
        .challenge-info h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .challenge-info p {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .travel-social {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .social-feed {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .social-post {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .social-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .social-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent);
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }
        
        .social-user {
            flex: 1;
        }
        
        .social-user h4 {
            font-size: 16px;
            margin-bottom: 2px;
        }
        
        .social-user p {
            font-size: 12px;
            opacity: 0.7;
        }
        
        .social-content {
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 10px;
        }
        
        .social-actions {
            display: flex;
            gap: 15px;
        }
        
        .social-action {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .social-action:hover {
            color: var(--accent);
        }

        /* NEW: Payment Modal Styles */
        .payment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .payment-content {
            width: 100%;
            max-width: 500px;
            background: rgba(30, 30, 40, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 25px;
            color: white;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-height: 85vh;
            overflow-y: auto;
        }

        .payment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .payment-header h2 {
            font-size: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .payment-details {
            margin-bottom: 20px;
        }

        .payment-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .payment-total {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            font-weight: bold;
            font-size: 18px;
            border-top: 2px solid rgba(255, 255, 255, 0.2);
            margin-top: 10px;
        }

        .payment-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .payment-methods {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .payment-method {
            flex: 1;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-method.selected {
            background: var(--primary);
        }

        .payment-method i {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-size: 14px;
            font-weight: 500;
        }

        .form-group input {
            padding: 12px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            outline: none;
        }

        .form-row {
            display: flex;
            gap: 10px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .payment-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .payment-btn {
            flex: 1;
            padding: 15px;
            border-radius: 10px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .confirm-payment {
            background: var(--success);
            color: white;
        }

        .cancel-payment {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .payment-btn:hover {
            transform: translateY(-2px);
        }

        /* NEW: Booking Confirmation Modal */
        .confirmation-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .confirmation-content {
            width: 100%;
            max-width: 500px;
            background: rgba(30, 30, 40, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 25px;
            color: white;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }

        .confirmation-icon {
            font-size: 60px;
            color: var(--success);
            margin-bottom: 20px;
        }

        .confirmation-content h2 {
            margin-bottom: 15px;
        }

        .confirmation-content p {
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .booking-reference {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 18px;
            letter-spacing: 2px;
        }

        /* Responsive adjustments */
        @media (max-width: 1024px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                width: 240px;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
                height: auto;
                min-height: 100vh;
            }
            
            .sidebar {
                width: 100%;
                padding: 15px;
            }
            
            .nav-menu {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .nav-item {
                flex: 1;
                min-width: 120px;
                justify-content: center;
                flex-direction: column;
                text-align: center;
                padding: 10px;
            }
            
            .user-profile {
                justify-content: center;
                text-align: center;
                flex-direction: column;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .places-container {
                grid-template-columns: 1fr;
            }
            
            .emergency-options {
                grid-template-columns: 1fr;
            }
            
            .place-details-body {
                grid-template-columns: 1fr;
            }
            
            .search-results-list {
                grid-template-columns: 1fr;
            }
            
            .booking-options {
                grid-template-columns: 1fr;
            }
            
            .hotel-info {
                flex-direction: column;
            }
            
            .hotel-image {
                width: 100%;
                height: 120px;
            }
            
            .filter-section {
                flex-direction: column;
            }
            
            .transport-options {
                grid-template-columns: 1fr;
            }
            
            .flight-form {
                grid-template-columns: 1fr;
            }
            
            .payment-methods {
                flex-direction: column;
            }
            
            .payment-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Login Screen -->
        <div class="login-screen" id="loginScreen">
            <div class="login-form" id="loginForm">
                <h2><i class="fas fa-compass"></i> TravelPal</h2>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter your password">
                </div>
                <button class="login-btn" id="loginBtn">Login</button>
                <div class="login-footer">
                    <p>Don't have an account? <a href="#" id="signupLink">Sign up</a></p>
                    <p><a href="#" id="forgotPassword">Forgot password?</a></p>
                </div>
            </div>
            
            <!-- Signup Form (Hidden by default) -->
            <div class="signup-form" id="signupForm" style="display: none;">
                <h2><i class="fas fa-compass"></i> Create Account</h2>
                <div class="form-group">
                    <label for="signupName">Full Name</label>
                    <input type="text" id="signupName" placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" placeholder="Create a password">
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" placeholder="Confirm your password">
                </div>
                <button class="login-btn" id="signupBtn">Sign Up</button>
                <div class="login-footer">
                    <p>Already have an account? <a href="#" id="loginLink">Login</a></p>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <div class="app-logo">
                <i class="fas fa-compass"></i>
                <span>TravelPal</span>
            </div>
            
            <div class="nav-menu">
                <div class="nav-item active" data-screen="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" data-screen="explore">
                    <i class="fas fa-map-marked-alt"></i>
                    <span>Explore</span>
                </div>
                <div class="nav-item" data-screen="trips">
                    <i class="fas fa-suitcase-rolling"></i>
                    <span>My Trips</span>
                </div>
                <div class="nav-item" data-screen="saved">
                    <i class="fas fa-heart"></i>
                    <span>Saved Places</span>
                </div>
                <div class="nav-item" data-screen="ai">
                    <i class="fas fa-robot"></i>
                    <span>AI Assistant</span>
                </div>
                <div class="nav-item" data-screen="translation">
                    <i class="fas fa-language"></i>
                    <span>Translation</span>
                </div>
                <div class="nav-item" data-screen="sustainability">
                    <i class="fas fa-leaf"></i>
                    <span>Sustainability</span>
                </div>
                <div class="nav-item" data-screen="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </div>
                <!-- NEW NAV ITEMS -->
                <div class="nav-item" data-screen="ai-recommendations">
                    <i class="fas fa-lightbulb"></i>
                    <span>AI Recommendations</span>
                </div>
                <div class="nav-item" data-screen="travel-journal">
                    <i class="fas fa-book"></i>
                    <span>Travel Journal</span>
                </div>
                <div class="nav-item" data-screen="travel-social">
                    <i class="fas fa-users"></i>
                    <span>Travel Community</span>
                </div>
            </div>
            
            <div class="user-profile">
                <div class="user-avatar">JS</div>
                <div class="user-info">
                    <h3>John Smith</h3>
                    <p>Pro Traveler</p>
                </div>
                <button class="logout-btn" id="logoutBtn" title="Logout">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="status-bar">
                <span id="currentTime">9:41</span>
                <span>
                    <i class="fas fa-signal"></i>
                    <i class="fas fa-wifi"></i>
                    <i class="fas fa-battery-three-quarters"></i>
                </span>
            </div>

            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search destinations, activities...">
                <button id="searchBtn"><i class="fas fa-search"></i></button>
            </div>

            <!-- Search Results Section -->
            <div class="search-results" id="searchResults">
                <div class="search-results-header">
                    <i class="fas fa-search"></i>
                    <h3>Search Results</h3>
                </div>
                <div class="search-results-list" id="searchResultsList">
                    <!-- Search results will be dynamically inserted here -->
                </div>
            </div>

            <!-- Dashboard Screen -->
            <div class="screen active" id="dashboard-screen">
                <div class="dashboard">
                    <div class="dashboard-left">
                        <!-- Destination Selection -->
                        <div class="destination-input">
                            <input type="text" id="currentDestination" placeholder="Enter your current destination">
                            <button id="updateDestinationBtn">Update</button>
                        </div>
                        
                        <div class="weather-widget" id="weatherWidget">
                            <div class="weather-header">
                                <div class="weather-info">
                                    <h3 id="currentLocation">Enter Destination</h3>
                                    <p id="currentWeather">Select a destination to see weather</p>
                                </div>
                                <div class="weather-icon">
                                    <i class="fas fa-sun"></i>
                                </div>
                            </div>
                            <div class="weather-details">
                                <div class="weather-detail">
                                    <p>Humidity</p>
                                    <p>-</p>
                                </div>
                                <div class="weather-detail">
                                    <p>Wind</p>
                                    <p>-</p>
                                </div>
                                <div class="weather-detail">
                                    <p>UV Index</p>
                                    <p>-</p>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div class="section-title">
                                <h2>Travel Features</h2>
                                <a href="#" id="viewAllFeatures">View All</a>
                            </div>
                            <div class="features-grid">
                                <div class="feature-card" data-feature="ai-planner">
                                    <div class="feature-icon">
                                        <i class="fas fa-robot"></i>
                                    </div>
                                    <h3>SmartTrip AI</h3>
                                </div>
                                <div class="feature-card" data-feature="ar-navigation">
                                    <div class="feature-icon">
                                        <i class="fas fa-vr-cardboard"></i>
                                    </div>
                                    <h3>RealityTour</h3>
                                </div>
                                <div class="feature-card" data-feature="safety-detection">
                                    <div class="feature-icon">
                                        <i class="fas fa-heartbeat"></i>
                                    </div>
                                    <h3>HealthSafe</h3>
                                </div>
                                <div class="feature-card" data-feature="local-guides">
                                    <div class="feature-icon">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <h3>Gramin Guide</h3>
                                </div>
                                <div class="feature-card" data-feature="expense-splitter">
                                    <div class="feature-icon">
                                        <i class="fas fa-money-bill-wave"></i>
                                    </div>
                                    <h3>SmartShare</h3>
                                </div>
                                <div class="feature-card" data-feature="cultural-mode">
                                    <div class="feature-icon">
                                        <i class="fas fa-landmark"></i>
                                    </div>
                                    <h3>DesiVibe</h3>
                                </div>
                                <div class="feature-card" data-feature="offline-mode">
                                    <div class="feature-icon">
                                        <i class="fas fa-wifi"></i>
                                    </div>
                                    <h3>NoNet Survival</h3>
                                </div>
                                <div class="feature-card" data-feature="voice-commands">
                                    <div class="feature-icon">
                                        <i class="fas fa-microphone"></i>
                                    </div>
                                    <h3>Voice Travel</h3>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div class="section-title">
                                <h2>Upcoming Trips</h2>
                                <a href="#" id="viewAllTrips">View All</a>
                            </div>
                            <div class="trips-container" id="tripsContainer">
                                <!-- Trips will be dynamically updated based on destination -->
                            </div>
                        </div>

                        <!-- Currency Converter - Now updates based on destination -->
                        <div class="currency-converter">
                            <div class="converter-header">
                                <i class="fas fa-money-bill-wave"></i>
                                <h3>Currency Converter</h3>
                            </div>
                            <div class="converter-inputs">
                                <input type="number" id="amount" placeholder="Amount" value="100">
                                <select id="fromCurrency">
                                    <option value="USD">USD</option>
                                    <option value="EUR">EUR</option>
                                    <option value="GBP">GBP</option>
                                    <option value="JPY">JPY</option>
                                    <option value="INR" selected>INR</option>
                                    <option value="CAD">CAD</option>
                                    <option value="AUD">AUD</option>
                                </select>
                                <select id="toCurrency">
                                    <option value="USD">USD</option>
                                    <option value="EUR" selected>EUR</option>
                                    <option value="GBP">GBP</option>
                                    <option value="JPY">JPY</option>
                                    <option value="INR">INR</option>
                                    <option value="CAD">CAD</option>
                                    <option value="AUD">AUD</option>
                                </select>
                            </div>
                            <div class="converter-result" id="converterResult">
                                100 INR = 1.10 EUR
                            </div>
                            <div class="converter-actions">
                                <button id="swapCurrencies">
                                    <i class="fas fa-exchange-alt"></i> Swap
                                </button>
                                <button id="saveConversion">
                                    <i class="fas fa-bookmark"></i> Save
                                </button>
                            </div>
                        </div>

                        <div class="local-insights">
                            <div class="insights-header">
                                <i class="fas fa-lightbulb"></i>
                                <h3>Local Insights</h3>
                            </div>
                            <div id="localInsightsContent">
                                <div class="insight-item">
                                    <i class="fas fa-info-circle"></i>
                                    <p>Select a destination to see local insights</p>
                                </div>
                            </div>
                        </div>

                        <!-- Expense History -->
                        <div class="expense-history">
                            <div class="expense-history-header">
                                <i class="fas fa-history"></i>
                                <h3>Recent Expenses</h3>
                            </div>
                            <div class="expense-history-list" id="expenseHistoryList">
                                <!-- Expense history will be dynamically loaded here -->
                            </div>
                        </div>

                        <!-- Travel Timeline - Now updates based on destination -->
                        <div class="travel-timeline">
                            <div class="timeline-header">
                                <i class="fas fa-stream"></i>
                                <h3>Today's Itinerary</h3>
                            </div>
                            <div class="timeline" id="timelineContent">
                                <div class="timeline-event">
                                    <h4>Select a destination</h4>
                                    <p>Update your destination to see itinerary</p>
                                </div>
                            </div>
                        </div>

                        <div class="travel-budget">
                            <div class="budget-header">
                                <i class="fas fa-chart-pie"></i>
                                <h3>Trip Budget</h3>
                            </div>
                            <div class="budget-category">
                                <div class="budget-category-header">
                                    <span>Accommodation</span>
                                    <span id="accommodationBudgetText">₹0 / ₹0</span>
                                </div>
                                <div class="budget-bar">
                                    <div class="budget-progress" id="accommodationProgress" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="budget-category">
                                <div class="budget-category-header">
                                    <span>Food & Dining</span>
                                    <span id="foodBudgetText">₹0 / ₹0</span>
                                </div>
                                <div class="budget-bar">
                                    <div class="budget-progress" id="foodProgress" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="budget-category">
                                <div class="budget-category-header">
                                    <span>Activities</span>
                                    <span id="activitiesBudgetText">₹0 / ₹0</span>
                                </div>
                                <div class="budget-bar">
                                    <div class="budget-progress" id="activitiesProgress" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="budget-summary">
                                <span>Total Spent:</span>
                                <span id="totalBudgetText">₹0 / ₹0</span>
                            </div>
                            <button class="action-button" id="updateBudgetBtn">
                                <i class="fas fa-edit"></i> Update Budget
                            </button>
                        </div>

                        <!-- Travel Expenses -->
                        <div class="travel-expenses">
                            <div class="expenses-header">
                                <i class="fas fa-receipt"></i>
                                <h3>Add New Expense</h3>
                            </div>
                            <div id="expenseItems">
                                <div class="expense-item">
                                    <div class="expense-category">
                                        <i class="fas fa-info-circle"></i>
                                        <span>No expenses yet</span>
                                    </div>
                                    <div class="expense-amount">₹0</div>
                                </div>
                            </div>
                            <button class="action-button" id="addExpenseBtn">
                                <i class="fas fa-plus"></i> Add Expense
                            </button>
                        </div>
                    </div>

                    <div class="dashboard-right">
                        <div class="ai-assistant">
                            <div class="ai-header">
                                <i class="fas fa-robot"></i>
                                <h3>TravelMate AI</h3>
                            </div>
                            <div class="ai-chat" id="aiChat">
                                <div class="chat-message ai">
                                    <p>Hello! I'm your AI travel assistant. How can I help you plan your next adventure?</p>
                                </div>
                            </div>
                            <div class="chat-input">
                                <input type="text" id="chatInput" placeholder="Ask me anything...">
                                <button id="sendMessage"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>

                        <div class="packing-assistant">
                            <div class="packing-header">
                                <i class="fas fa-suitcase"></i>
                                <h3>Packing Assistant</h3>
                            </div>
                            <div class="packing-list" id="packingList">
                                <div class="packing-item">
                                    <input type="checkbox" id="item1">
                                    <label for="item1">Passport & Documents</label>
                                </div>
                                <div class="packing-item">
                                    <input type="checkbox" id="item2">
                                    <label for="item2">Weather-appropriate clothing</label>
                                </div>
                                <div class="packing-item">
                                    <input type="checkbox" id="item3">
                                    <label for="item3">Chargers & Adapters</label>
                                </div>
                                <div class="packing-item">
                                    <input type="checkbox" id="item4">
                                    <label for="item4">First Aid Kit</label>
                                </div>
                                <div class="packing-item">
                                    <input type="checkbox" id="item5">
                                    <label for="item5">Travel Pillow</label>
                                </div>
                            </div>
                            <button class="packing-done-btn" id="packingDoneBtn">
                                <i class="fas fa-check-circle"></i> Packing is Done
                            </button>
                        </div>

                        <!-- Photo Gallery -->
                        <div class="photo-gallery">
                            <div class="gallery-header">
                                <i class="fas fa-images"></i>
                                <h3>Travel Photos</h3>
                            </div>
                            <div class="gallery-grid">
                                <div class="gallery-item">
                                    <i class="fas fa-mountain"></i>
                                </div>
                                <div class="gallery-item">
                                    <i class="fas fa-umbrella-beach"></i>
                                </div>
                                <div class="gallery-item">
                                    <i class="fas fa-landmark"></i>
                                </div>
                                <div class="gallery-item">
                                    <i class="fas fa-utensils"></i>
                                </div>
                                <div class="gallery-item">
                                    <i class="fas fa-hiking"></i>
                                </div>
                                <div class="gallery-item">
                                    <i class="fas fa-plus"></i>
                                </div>
                            </div>
                        </div>

                        <div class="travel-checklist">
                            <div class="checklist-header">
                                <i class="fas fa-tasks"></i>
                                <h3>Pre-Trip Checklist</h3>
                            </div>
                            <div class="packing-list">
                                <div class="checklist-item">
                                    <input type="checkbox" id="check1">
                                    <label for="check1">Book flights</label>
                                </div>
                                <div class="checklist-item">
                                    <input type="checkbox" id="check2" checked>
                                    <label for="check2">Reserve accommodation</label>
                                </div>
                                <div class="checklist-item">
                                    <input type="checkbox" id="check3" checked>
                                    <label for="check3">Purchase travel insurance</label>
                                </div>
                                <div class="checklist-item">
                                    <input type="checkbox" id="check4">
                                    <label for="check4">Notify bank of travel</label>
                                </div>
                                <div class="checklist-item">
                                    <input type="checkbox" id="check5">
                                    <label for="check5">Download offline maps</label>
                                </div>
                            </div>
                        </div>

                        <!-- Travel Map -->
                        <div class="travel-map">
                            <div class="map-header">
                                <i class="fas fa-map-marked-alt"></i>
                                <h3>Interactive Map</h3>
                            </div>
                            <div class="interactive-map" id="interactiveMap">
                                <div class="map-overlay">
                                    <div class="map-controls">
                                        <div class="map-control" id="zoomIn">
                                            <i class="fas fa-plus"></i>
                                        </div>
                                        <div class="map-control" id="zoomOut">
                                            <i class="fas fa-minus"></i>
                                        </div>
                                        <div class="map-control" id="currentLocation">
                                            <i class="fas fa-crosshairs"></i>
                                        </div>
                                    </div>
                                </div>
                                <!-- Leaflet Map -->
                                <div class="map-container" id="mapContainer">
                                    <div class="map-placeholder" id="mapPlaceholder">
                                        <p>Select a destination to view map</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="emergency-section">
                            <button class="emergency-button pulse" id="emergencyBtn">
                                <i class="fas fa-plus-circle"></i> Emergency Assistance
                            </button>
                            <div class="emergency-contacts">
                                <div class="emergency-contact" data-contact="police">
                                    <i class="fas fa-shield-alt"></i>
                                    <p>Police</p>
                                </div>
                                <div class="emergency-contact" data-contact="ambulance">
                                    <i class="fas fa-ambulance"></i>
                                    <p>Ambulance</p>
                                </div>
                                <div class="emergency-contact" data-contact="fire">
                                    <i class="fas fa-fire-extinguisher"></i>
                                    <p>Fire</p>
                                </div>
                                <div class="emergency-contact" data-contact="personal">
                                    <i class="fas fa-phone-alt"></i>
                                    <p>Emergency Contact</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Explore Screen -->
            <div class="screen" id="explore-screen">
                <div class="section-title">
                    <h2>Explore Destinations</h2>
                </div>
                
                <!-- Destination Input -->
                <div class="destination-input">
                    <input type="text" id="destinationInput" placeholder="Enter destination (e.g., Paris, Tokyo, London, New York, Rome)">
                    <button id="searchDestinationBtn">Search</button>
                </div>
                
                <!-- Interactive Map for Explore Screen -->
                <div class="interactive-map" id="exploreMap" style="height: 300px; margin-bottom: 25px;">
                    <div class="map-overlay">
                        <div class="map-controls">
                            <div class="map-control" id="exploreZoomIn">
                                <i class="fas fa-plus"></i>
                            </div>
                            <div class="map-control" id="exploreZoomOut">
                                <i class="fas fa-minus"></i>
                            </div>
                            <div class="map-control" id="exploreCurrentLocation">
                                <i class="fas fa-crosshairs"></i>
                            </div>
                        </div>
                    </div>
                    <!-- Leaflet Map -->
                    <div class="map-container" id="exploreMapContainer">
                        <div class="map-placeholder" id="exploreMapPlaceholder">
                            <p>Enter a destination to view map</p>
                        </div>
                    </div>
                </div>
                
                <div class="section-title">
                    <h2 id="placesTitle">Popular Tourist Places</h2>
                </div>
                
                <!-- Filter Section -->
                <div class="filter-section">
                    <select class="filter-select" id="sortPlaces">
                        <option value="rating">Sort by Rating</option>
                        <option value="name">Sort by Name</option>
                        <option value="popularity">Sort by Popularity</option>
                    </select>
                    <div class="filter-tags" id="placeFilters">
                        <div class="filter-tag active" data-filter="all">All</div>
                        <div class="filter-tag" data-filter="landmark">Landmarks</div>
                        <div class="filter-tag" data-filter="museum">Museums</div>
                        <div class="filter-tag" data-filter="park">Parks</div>
                        <div class="filter-tag" data-filter="restaurant">Restaurants</div>
                    </div>
                </div>
                
                <div class="places-container" id="placesContainer">
                    <!-- Places will be dynamically loaded here -->
                </div>
                
                <!-- Booking Section -->
                <div class="booking-section">
                    <div class="booking-header">
                        <i class="fas fa-concierge-bell"></i>
                        <h3>Book Your Trip</h3>
                    </div>
                    <div class="booking-options">
                        <div class="booking-option" id="bookFlights">
                            <i class="fas fa-plane"></i>
                            <h4>Flights</h4>
                            <p>Find the best flight deals</p>
                        </div>
                        <div class="booking-option" id="bookHotels">
                            <i class="fas fa-hotel"></i>
                            <h4>Hotels</h4>
                            <p>Book accommodation</p>
                        </div>
                        <div class="booking-option" id="bookActivities">
                            <i class="fas fa-ticket-alt"></i>
                            <h4>Activities</h4>
                            <p>Discover local experiences</p>
                        </div>
                        <div class="booking-option" id="bookTransport">
                            <i class="fas fa-car"></i>
                            <h4>Transport</h4>
                            <p>Rental cars & transfers</p>
                        </div>
                    </div>
                </div>
                
                <!-- Flight Search -->
                <div class="flight-search" id="flightSearchSection" style="display: none;">
                    <div class="flight-search-header">
                        <i class="fas fa-plane-departure"></i>
                        <h3>Find Flights</h3>
                    </div>
                    <div class="flight-form">
                        <input type="text" id="flightFrom" placeholder="From (City)">
                        <input type="text" id="flightTo" placeholder="To (City)">
                        <input type="date" id="flightDate">
                        <select id="flightTravelers">
                            <option value="1">1 Traveler</option>
                            <option value="2" selected>2 Travelers</option>
                            <option value="3">3 Travelers</option>
                            <option value="4">4 Travelers</option>
                        </select>
                    </div>
                    <button class="action-button" id="searchFlightsBtn">
                        <i class="fas fa-search"></i> Search Flights
                    </button>
                    <div class="flight-results" id="flightResults" style="display: none;">
                        <!-- Flight results will be dynamically loaded here -->
                    </div>
                </div>
                
                <!-- Hotel Booking Section -->
                <div class="hotel-booking" id="hotelBookingSection" style="display: none;">
                    <div class="hotel-booking-header">
                        <i class="fas fa-hotel"></i>
                        <h3>Recommended Hotels</h3>
                    </div>
                    
                    <!-- Hotel Filters -->
                    <div class="filter-section">
                        <select class="filter-select" id="sortHotels">
                            <option value="rating">Sort by Rating</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                            <option value="name">Sort by Name</option>
                        </select>
                        <div class="filter-tags" id="hotelFilters">
                            <div class="filter-tag active" data-filter="all">All</div>
                            <div class="filter-tag" data-filter="parking">Parking</div>
                            <div class="filter-tag" data-filter="pool">Pool</div>
                            <div class="filter-tag" data-filter="spa">Spa</div>
                            <div class="filter-tag" data-filter="breakfast">Breakfast</div>
                        </div>
                    </div>
                    
                    <div class="hotel-list" id="hotelList">
                        <!-- Hotels will be dynamically loaded here -->
                    </div>
                </div>
                
                <!-- Transport Options -->
                <div class="transport-options" id="transportSection" style="display: none;">
                    <div class="transport-option" data-transport="bus">
                        <i class="fas fa-bus"></i>
                        <h4>Bus</h4>
                        <p>Public transportation</p>
                    </div>
                    <div class="transport-option" data-transport="train">
                        <i class="fas fa-train"></i>
                        <h4>Train</h4>
                        <p>Rail services</p>
                    </div>
                    <div class="transport-option" data-transport="car">
                        <i class="fas fa-car"></i>
                        <h4>Car Rental</h4>
                        <p>Self-drive options</p>
                    </div>
                    <div class="transport-option" data-transport="taxi">
                        <i class="fas fa-taxi"></i>
                        <h4>Taxi</h4>
                        <p>Private ride services</p>
                    </div>
                </div>
            </div>

            <!-- My Trips Screen -->
            <div class="screen" id="trips-screen">
                <div class="section-title">
                    <h2>My Trips</h2>
                    <a href="#" id="addNewTrip">+ Add New Trip</a>
                </div>
                <div class="trips-container">
                    <div class="trip-card">
                        <div class="trip-image">
                            <i class="fas fa-eiffel-tower"></i>
                        </div>
                        <div class="trip-info">
                            <h3>Paris Getaway</h3>
                            <p>4-day cultural trip to experience Parisian art, cuisine, and landmarks</p>
                            <div class="trip-meta">
                                <span><i class="far fa-calendar"></i> May 10-14, 2025</span>
                                <span><i class="fas fa-users"></i> 2 people</span>
                            </div>
                            <div>
                                <span class="tag">Culture</span>
                                <span class="tag">Food</span>
                                <span class="tag">Art</span>
                            </div>
                        </div>
                    </div>
                    <div class="trip-card">
                        <div class="trip-image">
                            <i class="fas fa-skiing"></i>
                        </div>
                        <div class="trip-info">
                            <h3>Swiss Winter Adventure</h3>
                            <p>7-day skiing and snowboarding trip in the Swiss Alps</p>
                            <div class="trip-meta">
                                <span><i class="far fa-calendar"></i> Dec 20-27, 2025</span>
                                <span><i class="fas fa-users"></i> 4 people</span>
                            </div>
                            <div>
                                <span class="tag">Adventure</span>
                                <span class="tag">Winter</span>
                                <span class="tag">Skiing</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Saved Places Screen -->
            <div class="screen" id="saved-screen">
                <div class="section-title">
                    <h2>Saved Places</h2>
                </div>
                <div class="trips-container">
                    <div class="trip-card">
                        <div class="trip-image">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div class="trip-info">
                            <h3>Le Jules Verne Restaurant</h3>
                            <p>Michelin-starred restaurant in the Eiffel Tower with panoramic views of Paris</p>
                            <div class="trip-meta">
                                <span><i class="fas fa-map-marker-alt"></i> Paris, France</span>
                                <span><i class="fas fa-star"></i> 4.8</span>
                            </div>
                        </div>
                    </div>
                    <div class="trip-card">
                        <div class="trip-image">
                            <i class="fas fa-landmark"></i>
                        </div>
                        <div class="trip-info">
                            <h3>Louvre Museum</h3>
                            <p>World's largest art museum and a historic monument in Paris</p>
                            <div class="trip-meta">
                                <span><i class="fas fa-map-marker-alt"></i> Paris, France</span>
                                <span><i class="fas fa-star"></i> 4.7</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Assistant Screen -->
            <div class="screen" id="ai-screen">
                <div class="ai-assistant" style="height: 100%;">
                    <div class="ai-header">
                        <i class="fas fa-robot"></i>
                        <h3>TravelMate AI - Your Personal Travel Assistant</h3>
                    </div>
                    <div class="ai-suggestions">
                        <div class="ai-suggestion" data-suggestion="plan-trip">Plan a trip</div>
                        <div class="ai-suggestion" data-suggestion="destination">Destination ideas</div>
                        <div class="ai-suggestion" data-suggestion="budget">Budget planning</div>
                        <div class="ai-suggestion" data-suggestion="packing">Packing tips</div>
                    </div>
                    <div class="ai-chat" id="aiChatFull" style="height: calc(100% - 160px);">
                        <div class="chat-message ai">
                            <p>Hello! I'm your AI travel assistant. I can help you with trip planning, destination suggestions, budget estimates, and much more. What would you like to know?</p>
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="chatInputFull" placeholder="Ask me anything about travel...">
                        <button id="sendMessageFull"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>

            <!-- NEW: AI Recommendations Screen -->
            <div class="screen" id="ai-recommendations-screen">
                <div class="section-title">
                    <h2><i class="fas fa-lightbulb"></i> AI Recommendations</h2>
                </div>
                
                <div class="ai-recommendations">
                    <div class="recommendation-item">
                        <div class="recommendation-icon">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div class="recommendation-content">
                            <h4>Hidden Gem Restaurant</h4>
                            <p>Based on your food preferences, try "Le Petit Bistro" - authentic local cuisine with great reviews from travelers with similar tastes.</p>
                        </div>
                    </div>
                    
                    <div class="recommendation-item">
                        <div class="recommendation-icon">
                            <i class="fas fa-landmark"></i>
                        </div>
                        <div class="recommendation-content">
                            <h4>Off-the-Beaten-Path Attraction</h4>
                            <p>While everyone visits the main sites, we recommend the "Musée de la Chasse" for a unique experience matching your interest in art and history.</p>
                        </div>
                    </div>
                    
                    <div class="recommendation-item">
                        <div class="recommendation-icon">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="recommendation-content">
                            <h4>Perfect Time to Visit</h4>
                            <p>Based on crowd data and weather patterns, the best time to visit the Eiffel Tower is Tuesday-Thursday between 8-10 AM to avoid long queues.</p>
                        </div>
                    </div>
                    
                    <div class="recommendation-item">
                        <div class="recommendation-icon">
                            <i class="fas fa-walking"></i>
                        </div>
                        <div class="recommendation-content">
                            <h4>Optimized Walking Route</h4>
                            <p>We've created an efficient walking route that connects 5 major attractions with minimal backtracking, saving you 45 minutes of travel time.</p>
                        </div>
                    </div>
                </div>
                
                <div class="ai-insights">
                    <div class="insight-card">
                        <h4><i class="fas fa-chart-line"></i> Travel Pattern Analysis</h4>
                        <p>Our AI has analyzed your travel history and identified that you prefer cultural experiences (museums, historical sites) over adventure activities. We'll prioritize similar recommendations for your upcoming trips.</p>
                    </div>
                    
                    <div class="insight-card">
                        <h4><i class="fas fa-money-bill-wave"></i> Budget Optimization</h4>
                        <p>Based on your spending patterns, we've identified opportunities to save approximately 15% on your next trip by adjusting your accommodation choices and meal timing.</p>
                    </div>
                </div>
                
                <div class="ai-prediction">
                    <h3><i class="fas fa-crystal-ball"></i> Popularity Prediction</h3>
                    <p>Based on current trends and historical data, these destinations are predicted to become more popular in the next 6 months:</p>
                    
                    <div class="prediction-chart">
                        <div class="prediction-bar" style="height: 80%">
                            <div class="prediction-value">80%</div>
                            <div class="prediction-label">Portugal</div>
                        </div>
                        <div class="prediction-bar" style="height: 65%">
                            <div class="prediction-value">65%</div>
                            <div class="prediction-label">Japan</div>
                        </div>
                        <div class="prediction-bar" style="height: 55%">
                            <div class="prediction-value">55%</div>
                            <div class="prediction-label">Mexico</div>
                        </div>
                        <div class="prediction-bar" style="height: 45%">
                            <div class="prediction-value">45%</div>
                            <div class="prediction-label">Greece</div>
                        </div>
                        <div class="prediction-bar" style="height: 30%">
                            <div class="prediction-value">30%</div>
                            <div class="prediction-label">Vietnam</div>
                        </div>
                    </div>
                </div>
                
                <div class="ai-personalization">
                    <h3><i class="fas fa-user-cog"></i> Travel Preference Settings</h3>
                    
                    <div class="preference-slider">
                        <div class="slider-label">
                            <span>Budget Focus</span>
                            <span>Luxury Focus</span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-fill" style="width: 60%"></div>
                            <div class="slider-thumb" style="left: 60%"></div>
                        </div>
                    </div>
                    
                    <div class="preference-slider">
                        <div class="slider-label">
                            <span>Adventure</span>
                            <span>Relaxation</span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-fill" style="width: 40%"></div>
                            <div class="slider-thumb" style="left: 40%"></div>
                        </div>
                    </div>
                    
                    <div class="preference-slider">
                        <div class="slider-label">
                            <span>Cultural Immersion</span>
                            <span>Modern Comfort</span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-fill" style="width: 70%"></div>
                            <div class="slider-thumb" style="left: 70%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- NEW: Travel Journal Screen -->
            <div class="screen" id="travel-journal-screen">
                <div class="section-title">
                    <h2><i class="fas fa-book"></i> Travel Journal</h2>
                    <a href="#" id="addJournalEntry">+ New Entry</a>
                </div>
                
                <div class="travel-mood">
                    <h3>How was your day?</h3>
                    <div class="mood-emojis">
                        <div class="mood-emoji">😊</div>
                        <div class="mood-emoji">😄</div>
                        <div class="mood-emoji">😌</div>
                        <div class="mood-emoji">😐</div>
                        <div class="mood-emoji">😔</div>
                    </div>
                </div>
                
                <div class="travel-journal">
                    <div class="journal-entry">
                        <div class="journal-header">
                            <div class="journal-date">May 12, 2025</div>
                            <div class="journal-location">Paris, France</div>
                        </div>
                        <div class="journal-content">
                            <p>Visited the Louvre today - absolutely breathtaking! The Mona Lisa was smaller than I expected but still incredible to see in person. Spent the afternoon wandering through Montmartre and had the most delicious croissant at a tiny bakery. The view from Sacré-Cœur at sunset was magical.</p>
                        </div>
                    </div>
                    
                    <div class="journal-entry">
                        <div class="journal-header">
                            <div class="journal-date">May 11, 2025</div>
                            <div class="journal-location">Paris, France</div>
                        </div>
                        <div class="journal-content">
                            <p>First full day in Paris! Started with the Eiffel Tower - the view from the top was worth the wait. Took a Seine River cruise in the evening and saw the city lights. Tried escargot for the first time - not as bad as I expected!</p>
                        </div>
                    </div>
                </div>
                
                <div class="travel-challenges">
                    <h3><i class="fas fa-trophy"></i> Travel Challenges</h3>
                    
                    <div class="challenge-card">
                        <div class="challenge-progress">75%</div>
                        <div class="challenge-info">
                            <h4>Food Explorer</h4>
                            <p>Try 10 different local dishes</p>
                        </div>
                    </div>
                    
                    <div class="challenge-card">
                        <div class="challenge-progress">40%</div>
                        <div class="challenge-info">
                            <h4>Landmark Collector</h4>
                            <p>Visit 15 famous landmarks</p>
                        </div>
                    </div>
                    
                    <div class="challenge-card">
                        <div class="challenge-progress">100%</div>
                        <div class="challenge-info">
                            <h4>Local Transport Master</h4>
                            <p>Use 5 different types of local transportation</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- NEW: Travel Community Screen -->
            <div class="screen" id="travel-social-screen">
                <div class="section-title">
                    <h2><i class="fas fa-users"></i> Travel Community</h2>
                </div>
                
                <div class="travel-social">
                    <div class="social-feed">
                        <div class="social-post">
                            <div class="social-header">
                                <div class="social-avatar">MJ</div>
                                <div class="social-user">
                                    <h4>Maria Johnson</h4>
                                    <p>Currently in Tokyo • 2 hours ago</p>
                                </div>
                            </div>
                            <div class="social-content">
                                <p>Just discovered the most amazing ramen place in Shinjuku! The broth was incredible and the service was so friendly. Definitely adding this to my must-visit list for anyone coming to Tokyo.</p>
                            </div>
                            <div class="social-actions">
                                <div class="social-action">
                                    <i class="fas fa-heart"></i> 24
                                </div>
                                <div class="social-action">
                                    <i class="fas fa-comment"></i> 8
                                </div>
                                <div class="social-action">
                                    <i class="fas fa-share"></i> Share
                                </div>
                            </div>
                        </div>
                        
                        <div class="social-post">
                            <div class="social-header">
                                <div class="social-avatar">AS</div>
                                <div class="social-user">
                                    <h4>Alex Smith</h4>
                                    <p>Currently in Bali • 5 hours ago</p>
                                </div>
                            </div>
                            <div class="social-content">
                                <p>Just finished an incredible sunrise hike up Mount Batur. The view was absolutely worth the 2 AM wakeup call! Pro tip: bring warm clothes - it gets chilly at the summit before sunrise.</p>
                            </div>
                            <div class="social-actions">
                                <div class="social-action">
                                    <i class="fas fa-heart"></i> 42
                                </div>
                                <div class="social-action">
                                    <i class="fas fa-comment"></i> 15
                                </div>
                                <div class="social-action">
                                    <i class="fas fa-share"></i> Share
                                </div>
                            </div>
                        </div>
                        
                        <div class="social-post">
                            <div class="social-header">
                                <div class="social-avatar">TP</div>
                                <div class="social-user">
                                    <h4>TravelPal AI</h4>
                                    <p>Community Tip • 1 day ago</p>
                                </div>
                            </div>
                            <div class="social-content">
                                <p>Based on community data, we're seeing increased interest in sustainable travel options. Many travelers are now choosing eco-friendly accommodations and carbon-offset flights. Share your sustainable travel tips below!</p>
                            </div>
                            <div class="social-actions">
                                <div class="social-action">
                                    <i class="fas fa-heart"></i> 89
                                </div>
                                <div class="social-action">
                                    <i class="fas fa-comment"></i> 32
                                </div>
                                <div class="social-action">
                                    <i class="fas fa-share"></i> Share
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="local-guides">
                    <h3><i class="fas fa-user-friends"></i> Connect with Local Guides</h3>
                    
                    <div class="local-guide">
                        <div class="guide-avatar">LM</div>
                        <div class="guide-info">
                            <h4>Luc Moreau</h4>
                            <p>Paris Local Guide • Speaks English, French</p>
                        </div>
                        <button class="action-button" style="padding: 8px 15px; font-size: 14px;">
                            Connect
                        </button>
                    </div>
                    
                    <div class="local-guide">
                        <div class="guide-avatar">SK</div>
                        <div class="guide-info">
                            <h4>Satoko Kimura</h4>
                            <p>Tokyo Local Guide • Speaks English, Japanese</p>
                        </div>
                        <button class="action-button" style="padding: 8px 15px; font-size: 14px;">
                            Connect
                        </button>
                    </div>
                </div>
            </div>

            <!-- Translation Screen -->
            <div class="screen" id="translation-screen">
                <div class="section-title">
                    <h2>Translation</h2>
                </div>
                
                <!-- Voice Command -->
                <div class="voice-command">
                    <div class="voice-btn" id="voiceTranslateBtn">
                        <i class="fas fa-microphone"></i>
                    </div>
                    <div class="voice-status" id="voiceTranslateStatus">
                        Click to speak for translation
                    </div>
                </div>
                
                <div class="currency-converter">
                    <div class="converter-header">
                        <i class="fas fa-language"></i>
                        <h3>Text Translator</h3>
                    </div>
                    <div class="converter-inputs">
                        <select id="translateFrom">
                            <option value="en">English</option>
                            <option value="fr">French</option>
                            <option value="es">Spanish</option>
                            <option value="de">German</option>
                            <option value="it">Italian</option>
                            <option value="ja">Japanese</option>
                            <option value="zh">Chinese</option>
                        </select>
                        <select id="translateTo">
                            <option value="fr">French</option>
                            <option value="en">English</option>
                            <option value="es">Spanish</option>
                            <option value="de">German</option>
                            <option value="it">Italian</option>
                            <option value="ja">Japanese</option>
                            <option value="zh">Chinese</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <textarea id="textToTranslate" placeholder="Enter text to translate..."></textarea>
                    </div>
                    <div class="converter-result" id="translationResult">
                        Translated text will appear here
                    </div>
                    <button class="action-button" id="translateBtn">
                        <i class="fas fa-exchange-alt"></i> Translate
                    </button>
                </div>
            </div>

            <!-- Sustainability Screen -->
            <div class="screen" id="sustainability-screen">
                <div class="section-title">
                    <h2>Sustainability</h2>
                </div>
                <div class="travel-budget">
                    <div class="budget-header">
                        <i class="fas fa-leaf"></i>
                        <h3>Your Carbon Footprint</h3>
                    </div>
                    <div class="budget-category">
                        <div class="budget-category-header">
                            <span>Transportation</span>
                            <span>120kg / 150kg</span>
                        </div>
                        <div class="budget-bar">
                            <div class="budget-progress" style="width: 80%; background: var(--warning);"></div>
                        </div>
                    </div>
                    <div class="budget-category">
                        <div class="budget-category-header">
                            <span>Accommodation</span>
                            <span>45kg / 100kg</span>
                        </div>
                        <div class="budget-bar">
                            <div class="budget-progress" style="width: 45%; background: var(--success);"></div>
                        </div>
                    </div>
                    <div class="budget-category">
                        <div class="budget-category-header">
                            <span>Activities</span>
                            <span>30kg / 50kg</span>
                        </div>
                        <div class="budget-bar">
                            <div class="budget-progress" style="width: 60%; background: var(--secondary);"></div>
                        </div>
                    </div>
                    <div class="budget-summary">
                        <span>Total Carbon:</span>
                        <span>195kg CO2</span>
                    </div>
                </div>
                <div class="local-insights">
                    <div class="insights-header">
                        <i class="fas fa-lightbulb"></i>
                        <h3>Sustainability Tips</h3>
                    </div>
                    <div class="insight-item">
                        <i class="fas fa-train"></i>
                        <p>Use public transportation instead of taxis to reduce your carbon footprint</p>
                    </div>
                    <div class="insight-item">
                        <i class="fas fa-utensils"></i>
                        <p>Choose local restaurants that source ingredients locally</p>
                    </div>
                    <div class="insight-item">
                        <i class="fas fa-bottle-water"></i>
                        <p>Carry a reusable water bottle to reduce plastic waste</p>
                    </div>
                </div>
            </div>

            <!-- Settings Screen -->
            <div class="screen" id="settings-screen">
                <div class="section-title">
                    <h2>Settings</h2>
                </div>
                <div class="travel-checklist">
                    <div class="checklist-header">
                        <i class="fas fa-user-cog"></i>
                        <h3>Account Settings</h3>
                    </div>
                    <div class="packing-list">
                        <div class="checklist-item">
                            <i class="fas fa-bell"></i>
                            <label>Push Notifications</label>
                            <input type="checkbox" id="notifications" checked style="margin-left: auto;">
                        </div>
                        <div class="checklist-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <label>Location Services</label>
                            <input type="checkbox" id="location" checked style="margin-left: auto;">
                        </div>
                        <div class="checklist-item">
                            <i class="fas fa-moon"></i>
                            <label>Dark Mode</label>
                            <input type="checkbox" id="darkMode" checked style="margin-left: auto;">
                        </div>
                        <div class="checklist-item">
                            <i class="fas fa-language"></i>
                            <label>Language</label>
                            <select id="appLanguage" style="margin-left: auto; background: rgba(255,255,255,0.1); color: white; border: none; padding: 5px; border-radius: 5px;">
                                <option>English</option>
                                <option>French</option>
                                <option>Spanish</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="settings-group">
                    <h3>Emergency Contacts</h3>
                    <div class="form-group">
                        <input type="text" id="primaryContact" placeholder="Primary Emergency Contact">
                    </div>
                    <div class="form-group">
                        <input type="text" id="secondaryContact" placeholder="Secondary Emergency Contact">
                    </div>
                </div>
                <div class="settings-group">
                    <h3>Voice Commands</h3>
                    <div class="checklist-item">
                        <i class="fas fa-microphone"></i>
                        <label>Enable Voice Commands</label>
                        <input type="checkbox" id="voiceCommands" checked style="margin-left: auto;">
                    </div>
                </div>
                <button class="action-button" id="saveSettings">
                    <i class="fas fa-save"></i> Save Settings
                </button>
            </div>
        </div>
    </div>

    <!-- NEW: Payment Modal -->
    <div class="payment-modal" id="paymentModal">
        <div class="payment-content">
            <div class="payment-header">
                <h2><i class="fas fa-credit-card"></i> Payment Details</h2>
                <button class="close-modal" id="closePaymentModal">&times;</button>
            </div>
            <div class="payment-details">
                <h3>Flight Booking Summary</h3>
                <div class="payment-item">
                    <span id="paymentFlight">Flight Details</span>
                    <span id="paymentPrice">₹0</span>
                </div>
                <div class="payment-item">
                    <span>Taxes & Fees</span>
                    <span id="paymentTaxes">₹0</span>
                </div>
                <div class="payment-item">
                    <span>Service Charge</span>
                    <span>₹200</span>
                </div>
                <div class="payment-total">
                    <span>Total Amount</span>
                    <span id="paymentTotal">₹0</span>
                </div>
            </div>
            
            <div class="payment-form">
                <h3>Payment Method</h3>
                <div class="payment-methods">
                    <div class="payment-method selected" data-method="card">
                        <i class="fas fa-credit-card"></i>
                        <p>Credit Card</p>
                    </div>
                    <div class="payment-method" data-method="upi">
                        <i class="fas fa-mobile-alt"></i>
                        <p>UPI</p>
                    </div>
                    <div class="payment-method" data-method="netbanking">
                        <i class="fas fa-university"></i>
                        <p>Net Banking</p>
                    </div>
                </div>
                
                <div id="cardPaymentForm">
                    <div class="form-group">
                        <label for="cardNumber">Card Number</label>
                        <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="expiryDate">Expiry Date</label>
                            <input type="text" id="expiryDate" placeholder="MM/YY" maxlength="5">
                        </div>
                        <div class="form-group">
                            <label for="cvv">CVV</label>
                            <input type="text" id="cvv" placeholder="123" maxlength="3">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="cardName">Name on Card</label>
                        <input type="text" id="cardName" placeholder="John Doe">
                    </div>
                </div>
                
                <div id="upiPaymentForm" style="display: none;">
                    <div class="form-group">
                        <label for="upiId">UPI ID</label>
                        <input type="text" id="upiId" placeholder="yourname@upi">
                    </div>
                </div>
                
                <div id="netbankingPaymentForm" style="display: none;">
                    <div class="form-group">
                        <label for="bankSelect">Select Bank</label>
                        <select id="bankSelect" style="padding: 12px; border-radius: 10px; border: none; background: rgba(255,255,255,0.1); color: white; outline: none;">
                            <option value="">Select your bank</option>
                            <option value="sbi">State Bank of India</option>
                            <option value="hdfc">HDFC Bank</option>
                            <option value="icici">ICICI Bank</option>
                            <option value="axis">Axis Bank</option>
                            <option value="pnb">Punjab National Bank</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="payment-actions">
                <button class="payment-btn cancel-payment" id="cancelPayment">Cancel</button>
                <button class="payment-btn confirm-payment" id="confirmPayment">Confirm Payment</button>
            </div>
        </div>
    </div>
    
    <!-- NEW: Booking Confirmation Modal -->
    <div class="confirmation-modal" id="confirmationModal">
        <div class="confirmation-content">
            <div class="confirmation-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2>Booking Confirmed!</h2>
            <p>Your flight has been successfully booked. A confirmation email has been sent to your registered email address.</p>
            
            <div class="booking-reference" id="bookingReference">
                TRVPL-5A8B2C9D
            </div>
            
            <p>You can view your booking details in the "My Trips" section.</p>
            
            <button class="action-button" id="closeConfirmation">
                <i class="fas fa-check"></i> Done
            </button>
        </div>
    </div>

    <!-- Emergency Assistance Modal -->
    <div class="emergency-modal" id="emergencyModal">
        <div class="emergency-modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-exclamation-triangle"></i> Emergency Assistance</h2>
                <button class="close-modal" id="closeEmergencyModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="feature-detail">
                    <h3><i class="fas fa-first-aid"></i> Immediate Help Available</h3>
                    <p>Select the type of emergency assistance you need. Your location has been shared with emergency services.</p>
                </div>
                
                <div class="emergency-options">
                    <div class="emergency-option" data-type="police">
                        <i class="fas fa-shield-alt"></i>
                        <h4>Police</h4>
                        <p>Contact local police</p>
                    </div>
                    <div class="emergency-option" data-type="ambulance">
                        <i class="fas fa-ambulance"></i>
                        <h4>Ambulance</h4>
                        <p>Medical emergency</p>
                    </div>
                    <div class="emergency-option" data-type="fire">
                        <i class="fas fa-fire-extinguisher"></i>
                        <h4>Fire Department</h4>
                        <p>Fire emergency</p>
                    </div>
                    <div class="emergency-option" data-type="personal">
                        <i class="fas fa-user-friends"></i>
                        <h4>Emergency Contact</h4>
                        <p>Notify your contacts</p>
                    </div>
                </div>
                
                <button class="sos-button sos-active" id="sosButton">
                    <i class="fas fa-bell"></i> SOS EMERGENCY
                </button>
                
                <div class="local-insights" style="margin-top: 20px;">
                    <div class="insights-header">
                        <i class="fas fa-info-circle"></i>
                        <h3>Nearby Emergency Services</h3>
                    </div>
                    <div class="insight-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <p>Police Station: 1.2 km away</p>
                    </div>
                    <div class="insight-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <p>Hospital: 2.5 km away</p>
                    </div>
                    <div class="insight-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <p>Fire Station: 3.1 km away</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Budget Update Modal -->
    <div class="modal" id="budgetModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-edit"></i> Update Trip Budget</h2>
                <button class="close-modal" id="closeBudgetModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="feature-detail">
                    <h3><i class="fas fa-chart-pie"></i> Current Budget Status</h3>
                    <p>Update your budget categories to better track your expenses.</p>
                </div>
                
                <div class="budget-update-form">
                    <div class="budget-category-input">
                        <label for="accommodationBudget">Accommodation Budget</label>
                        <div class="budget-input-group">
                            <span style="padding: 12px; background: rgba(255,255,255,0.1); border-radius: 10px 0 0 10px;">₹</span>
                            <input type="number" id="accommodationBudget" value="5000">
                        </div>
                    </div>
                    
                    <div class="budget-category-input">
                        <label for="foodBudget">Food & Dining Budget</label>
                        <div class="budget-input-group">
                            <span style="padding: 12px; background: rgba(255,255,255,0.1); border-radius: 10px 0 0 10px;">₹</span>
                            <input type="number" id="foodBudget" value="3000">
                        </div>
                    </div>
                    
                    <div class="budget-category-input">
                        <label for="activitiesBudget">Activities Budget</label>
                        <div class="budget-input-group">
                            <span style="padding: 12px; background: rgba(255,255,255,0.1); border-radius: 10px 0 0 10px;">₹</span>
                            <input type="number" id="activitiesBudget" value="2000">
                        </div>
                    </div>
                    
                    <div class="budget-category-input">
                        <label for="totalBudget">Total Trip Budget</label>
                        <div class="budget-input-group">
                            <span style="padding: 12px; background: rgba(255,255,255,0.1); border-radius: 10px 0 0 10px;">₹</span>
                            <input type="number" id="totalBudget" value="10000" readonly style="background: rgba(255,255,255,0.05);">
                        </div>
                    </div>
                </div>
                
                <button class="action-button" id="saveBudget">
                    <i class="fas fa-save"></i> Save Budget
                </button>
            </div>
        </div>
    </div>

    <!-- Add Expense Modal -->
    <div class="modal" id="expenseModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> Add Expense</h2>
                <button class="close-modal" id="closeExpenseModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="feature-detail">
                    <h3><i class="fas fa-receipt"></i> Track Your Spending</h3>
                    <p>Add a new expense to keep track of your travel budget.</p>
                </div>
                
                <div class="trip-planner-form">
                    <div class="form-group">
                        <label for="expenseDescription">Description</label>
                        <input type="text" id="expenseDescription" placeholder="What did you spend on?">
                    </div>
                    
                    <div class="form-group">
                        <label for="expenseCategory">Category</label>
                        <select id="expenseCategory">
                            <option value="accommodation">Accommodation</option>
                            <option value="food">Food & Dining</option>
                            <option value="activities">Activities</option>
                            <option value="transportation">Transportation</option>
                            <option value="shopping">Shopping</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="expenseAmount">Amount</label>
                        <div class="budget-input-group">
                            <span style="padding: 12px; background: rgba(255,255,255,0.1); border-radius: 10px 0 0 10px;">₹</span>
                            <input type="number" id="expenseAmount" placeholder="0.00">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="expenseDate">Date</label>
                        <input type="date" id="expenseDate">
                    </div>
                </div>
                
                <button class="action-button" id="saveExpense">
                    <i class="fas fa-save"></i> Add Expense
                </button>
            </div>
        </div>
    </div>

    <!-- AI Trip Planner Modal -->
    <div class="modal" id="ai-planner-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-robot"></i> SmartTrip AI Planner</h2>
                <button class="close-modal" id="closeAIPlannerModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="feature-detail">
                    <h3><i class="fas fa-magic"></i> Complete AI Travel Planning</h3>
                    <p>Our AI creates personalized travel plans based on your preferences, budget, and travel style.</p>
                </div>
                
                <div class="trip-planner-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="destination">Destination</label>
                            <input type="text" id="destination" placeholder="Where do you want to go?">
                        </div>
                        <div class="form-group">
                            <label for="travelDates">Travel Dates</label>
                            <input type="date" id="travelDates">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="travelers">Number of Travelers</label>
                            <select id="travelers">
                                <option value="1">1 Traveler</option>
                                <option value="2" selected>2 Travelers</option>
                                <option value="3">3 Travelers</option>
                                <option value="4">4 Travelers</option>
                                <option value="5+">5+ Travelers</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="budget">Budget (per person)</label>
                            <select id="budget">
                                <option value="budget">Budget (₹5,000-₹10,000)</option>
                                <option value="moderate" selected>Moderate (₹10,000-₹25,000)</option>
                                <option value="luxury">Luxury (₹25,000+)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="travelStyle">Travel Style</label>
                        <select id="travelStyle">
                            <option value="relaxing">Relaxing & Leisure</option>
                            <option value="adventurous">Adventurous & Active</option>
                            <option value="cultural" selected>Cultural & Historical</option>
                            <option value="food">Food & Culinary</option>
                            <option value="nature">Nature & Outdoor</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Travel Preferences</label>
                        <div class="preferences-grid">
                            <div class="preference-option">
                                <input type="checkbox" id="pref-beach">
                                <label for="pref-beach">Beach</label>
                            </div>
                            <div class="preference-option">
                                <input type="checkbox" id="pref-mountains">
                                <label for="pref-mountains">Mountains</label>
                            </div>
                            <div class="preference-option">
                                <input type="checkbox" id="pref-city" checked>
                                <label for="pref-city">City</label>
                            </div>
                            <div class="preference-option">
                                <input type="checkbox" id="pref-countryside">
                                <label for="pref-countryside">Countryside</label>
                            </div>
                            <div class="preference-option">
                                <input type="checkbox" id="pref-museums" checked>
                                <label for="pref-museums">Museums</label>
                            </div>
                            <div class="preference-option">
                                <input type="checkbox" id="pref-shopping">
                                <label for="pref-shopping">Shopping</label>
                            </div>
                            <div class="preference-option">
                                <input type="checkbox" id="pref-nightlife">
                                <label for="pref-nightlife">Nightlife</label>
                            </div>
                            <div class="preference-option">
                                <input type="checkbox" id="pref-family">
                                <label for="pref-family">Family Friendly</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="specialRequests">Special Requests</label>
                        <textarea id="specialRequests" placeholder="Any specific requirements or interests?"></textarea>
                    </div>
                </div>
                
                <button class="action-button" id="generatePlan">
                    <i class="fas fa-robot"></i> Generate AI Travel Plan
                </button>
                
                <div id="aiPlanResult" style="margin-top: 20px; display: none;">
                    <!-- AI plan will be displayed here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Place Details Modal -->
    <div class="place-details-modal" id="placeDetailsModal">
        <div class="place-details-content">
            <div class="place-details-header">
                <h2 id="placeDetailsTitle"><i class="fas fa-landmark"></i> Place Details</h2>
                <button class="close-modal" id="closePlaceDetailsModal">&times;</button>
            </div>
            <div class="place-details-body">
                <div class="place-image-large" id="placeImageLarge">
                    <i class="fas fa-landmark"></i>
                </div>
                <div class="place-info-detailed">
                    <h3 id="placeName">Place Name</h3>
                    <div class="place-rating-detailed">
                        <div>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                            <span id="placeRating">4.7</span>
                        </div>
                        <span id="placeReviews">(12,543 reviews)</span>
                    </div>
                    <p class="place-description" id="placeDescription">
                        Place description will appear here.
                    </p>
                    <div class="place-features">
                        <div class="place-feature">
                            <i class="fas fa-clock"></i> Open 9AM-12AM
                        </div>
                        <div class="place-feature">
                            <i class="fas fa-euro-sign"></i> ₹25-₹50
                        </div>
                        <div class="place-feature">
                            <i class="fas fa-walking"></i> 2-3 hours
                        </div>
                        <div class="place-feature">
                            <i class="fas fa-wheelchair"></i> Accessible
                        </div>
                    </div>
                    <div class="local-insights" style="margin-top: 15px;">
                        <div class="insights-header">
                            <i class="fas fa-lightbulb"></i>
                            <h3>Travel Tips</h3>
                        </div>
                        <div class="insight-item">
                            <i class="fas fa-sun"></i>
                            <p>Visit early morning or late evening to avoid crowds</p>
                        </div>
                        <div class="insight-item">
                            <i class="fas fa-ticket-alt"></i>
                            <p>Book tickets online in advance to skip the queue</p>
                        </div>
                        <div class="insight-item">
                            <i class="fas fa-camera"></i>
                            <p>Best photo spot: Trocadéro Gardens across the river</p>
                        </div>
                    </div>
                    <div class="place-actions">
                        <button class="action-button">
                            <i class="fas fa-heart"></i> Save
                        </button>
                        <button class="action-button" id="getDirectionsBtn">
                            <i class="fas fa-directions"></i> Get Directions
                        </button>
                        <button class="action-button">
                            <i class="fas fa-ticket-alt"></i> Book Tickets
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // DOM Elements
        const loginScreen = document.getElementById('loginScreen');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const loginBtn = document.getElementById('loginBtn');
        const signupBtn = document.getElementById('signupBtn');
        const signupLink = document.getElementById('signupLink');
        const loginLink = document.getElementById('loginLink');
        const logoutBtn = document.getElementById('logoutBtn');
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const searchResults = document.getElementById('searchResults');
        const searchResultsList = document.getElementById('searchResultsList');
        const navItems = document.querySelectorAll('.nav-item');
        const screens = document.querySelectorAll('.screen');
        const emergencyBtn = document.getElementById('emergencyBtn');
        const emergencyModal = document.getElementById('emergencyModal');
        const closeModalBtns = document.querySelectorAll('.close-modal');
        const budgetModal = document.getElementById('budgetModal');
        const updateBudgetBtn = document.getElementById('updateBudgetBtn');
        const expenseModal = document.getElementById('expenseModal');
        const addExpenseBtn = document.getElementById('addExpenseBtn');
        const aiPlannerModal = document.getElementById('ai-planner-modal');
        const placeDetailsModal = document.getElementById('placeDetailsModal');
        const featureCards = document.querySelectorAll('.feature-card');
        const destinationInput = document.getElementById('destinationInput');
        const searchDestinationBtn = document.getElementById('searchDestinationBtn');
        const placesContainer = document.getElementById('placesContainer');
        const bookHotels = document.getElementById('bookHotels');
        const hotelBookingSection = document.getElementById('hotelBookingSection');
        const hotelList = document.getElementById('hotelList');
        const expenseHistoryList = document.getElementById('expenseHistoryList');
        const currentDestination = document.getElementById('currentDestination');
        const updateDestinationBtn = document.getElementById('updateDestinationBtn');
        const currentLocation = document.getElementById('currentLocation');
        const currentWeather = document.getElementById('currentWeather');
        const localInsightsContent = document.getElementById('localInsightsContent');
        const timelineContent = document.getElementById('timelineContent');
        const expenseItems = document.getElementById('expenseItems');
        const mapPlaceholder = document.getElementById('mapPlaceholder');
        const exploreMapPlaceholder = document.getElementById('exploreMapPlaceholder');
        const bookFlights = document.getElementById('bookFlights');
        const flightSearchSection = document.getElementById('flightSearchSection');
        const searchFlightsBtn = document.getElementById('searchFlightsBtn');
        const flightResults = document.getElementById('flightResults');
        const bookTransport = document.getElementById('bookTransport');
        const transportSection = document.getElementById('transportSection');
        const sortPlaces = document.getElementById('sortPlaces');
        const placeFilters = document.getElementById('placeFilters');
        const sortHotels = document.getElementById('sortHotels');
        const hotelFilters = document.getElementById('hotelFilters');
        const aiSuggestions = document.querySelectorAll('.ai-suggestion');
        const voiceTranslateBtn = document.getElementById('voiceTranslateBtn');
        const voiceTranslateStatus = document.getElementById('voiceTranslateStatus');
        const translateBtn = document.getElementById('translateBtn');
        const textToTranslate = document.getElementById('textToTranslate');
        const translationResult = document.getElementById('translationResult');
        const saveSettings = document.getElementById('saveSettings');
        const generatePlan = document.getElementById('generatePlan');
        const aiPlanResult = document.getElementById('aiPlanResult');
        const tripsContainer = document.getElementById('tripsContainer');
        const getDirectionsBtn = document.getElementById('getDirectionsBtn');
        const accommodationBudgetText = document.getElementById('accommodationBudgetText');
        const foodBudgetText = document.getElementById('foodBudgetText');
        const activitiesBudgetText = document.getElementById('activitiesBudgetText');
        const totalBudgetText = document.getElementById('totalBudgetText');
        const accommodationProgress = document.getElementById('accommodationProgress');
        const foodProgress = document.getElementById('foodProgress');
        const activitiesProgress = document.getElementById('activitiesProgress');
        const packingDoneBtn = document.getElementById('packingDoneBtn');

        // NEW: AI Features Elements
        const moodEmojis = document.querySelectorAll('.mood-emoji');
        const addJournalEntry = document.getElementById('addJournalEntry');

        // NEW: Payment Elements
        const paymentModal = document.getElementById('paymentModal');
        const confirmationModal = document.getElementById('confirmationModal');
        const cancelPayment = document.getElementById('cancelPayment');
        const confirmPayment = document.getElementById('confirmPayment');
        const closeConfirmation = document.getElementById('closeConfirmation');
        const paymentMethods = document.querySelectorAll('.payment-method');
        const cardPaymentForm = document.getElementById('cardPaymentForm');
        const upiPaymentForm = document.getElementById('upiPaymentForm');
        const netbankingPaymentForm = document.getElementById('netbankingPaymentForm');

        // NEW: Modal Close Buttons
        const closePaymentModal = document.getElementById('closePaymentModal');
        const closeEmergencyModal = document.getElementById('closeEmergencyModal');
        const closeBudgetModal = document.getElementById('closeBudgetModal');
        const closeExpenseModal = document.getElementById('closeExpenseModal');
        const closeAIPlannerModal = document.getElementById('closeAIPlannerModal');
        const closePlaceDetailsModal = document.getElementById('closePlaceDetailsModal');

        // App State
        let currentUserDestination = '';
        let userSettings = {
            notifications: true,
            location: true,
            darkMode: true,
            language: 'English',
            primaryContact: '',
            secondaryContact: '',
            voiceCommands: true
        };

        // Sample data for the application
        const destinationData = {
            'Paris': {
                currency: 'EUR',
                weather: {
                    condition: 'Sunny',
                    temperature: '24°C',
                    humidity: '65%',
                    wind: '12 km/h',
                    uvIndex: 'Moderate'
                },
                insights: [
                    { icon: 'fas fa-utensils', text: 'Try the local croissants at Boulangerie Moderne' },
                    { icon: 'fas fa-subway', text: 'Use Metro Line 4 to avoid traffic to Eiffel Tower' },
                    { icon: 'fas fa-sun', text: 'Best photo time at Louvre: 8-10 AM (fewer crowds)' }
                ],
                itinerary: [
                    { time: '9:00 AM - 11:00 AM', activity: 'Eiffel Tower Visit' },
                    { time: '11:30 AM - 2:00 PM', activity: 'Louvre Museum' },
                    { time: '2:00 PM - 3:00 PM', activity: 'Lunch Break' },
                    { time: '3:30 PM - 5:00 PM', activity: 'Seine River Cruise' }
                ],
                trips: [
                    {
                        name: 'Paris Getaway',
                        description: '4-day cultural trip to experience Parisian art, cuisine, and landmarks',
                        date: 'May 10-14, 2025',
                        people: 2,
                        tags: ['Culture', 'Food', 'Art'],
                        icon: 'fas fa-eiffel-tower'
                    }
                ],
                places: [
                    {
                        id: 1,
                        name: 'Eiffel Tower',
                        description: 'Iconic iron tower offering city views & evening light shows.',
                        type: 'landmark',
                        rating: 4.7,
                        reviews: 12543,
                        image: 'fas fa-tower-eiffel',
                        tags: ['Landmark', 'Views', 'Iconic']
                    },
                    {
                        id: 2,
                        name: 'Louvre Museum',
                        description: 'World\'s largest art museum, home to the Mona Lisa.',
                        type: 'museum',
                        rating: 4.6,
                        reviews: 8945,
                        image: 'fas fa-landmark',
                        tags: ['Art', 'Museum', 'History']
                    },
                    {
                        id: 3,
                        name: 'Notre-Dame Cathedral',
                        description: 'Medieval Catholic cathedral known for its French Gothic architecture.',
                        type: 'religious',
                        rating: 4.5,
                        reviews: 7654,
                        image: 'fas fa-church',
                        tags: ['Cathedral', 'Gothic', 'History']
                    },
                    {
                        id: 4,
                        name: 'Arc de Triomphe',
                        description: 'Iconic triumphal arch honoring those who fought for France.',
                        type: 'monument',
                        rating: 4.4,
                        reviews: 5432,
                        image: 'fas fa-monument',
                        tags: ['Monument', 'History', 'Views']
                    },
                    {
                        id: 5,
                        name: 'Montmartre',
                        description: 'Historic artistic neighborhood with the Sacré-Cœur Basilica.',
                        type: 'neighborhood',
                        rating: 4.6,
                        reviews: 6789,
                        image: 'fas fa-palette',
                        tags: ['Artsy', 'Views', 'Historic']
                    },
                    {
                        id: 6,
                        name: 'Seine River Cruise',
                        description: 'Scenic boat tours along the Seine River passing major landmarks.',
                        type: 'activity',
                        rating: 4.5,
                        reviews: 4321,
                        image: 'fas fa-ship',
                        tags: ['River', 'Tour', 'Scenic']
                    }
                ],
                hotels: [
                    {
                        id: 1,
                        name: 'Hôtel Le Bristol',
                        description: 'Luxury hotel with a Michelin-starred restaurant and spa.',
                        rating: 4.8,
                        price: '€450',
                        image: 'fas fa-hotel',
                        amenities: ['Spa', 'Pool', 'Restaurant', 'Parking', 'Breakfast']
                    },
                    {
                        id: 2,
                        name: 'Hôtel Costes',
                        description: 'Chic boutique hotel with a famous courtyard and bar.',
                        rating: 4.6,
                        price: '€320',
                        image: 'fas fa-hotel',
                        amenities: ['Bar', 'Stylish', 'Central', 'Spa']
                    },
                    {
                        id: 3,
                        name: 'Le Marais Apartment',
                        description: 'Modern apartment in the heart of historic Le Marais.',
                        rating: 4.7,
                        price: '€180',
                        image: 'fas fa-home',
                        amenities: ['Apartment', 'Kitchen', 'Historic Area', 'Breakfast']
                    },
                    {
                        id: 4,
                        name: 'Hotel Plaza Athénée',
                        description: 'Luxury hotel with Eiffel Tower views and haute cuisine.',
                        rating: 4.9,
                        price: '€650',
                        image: 'fas fa-hotel',
                        amenities: ['Luxury', 'Restaurant', 'Spa', 'Pool', 'Parking']
                    }
                ]
            },
            'Tokyo': {
                currency: 'JPY',
                weather: {
                    condition: 'Partly Cloudy',
                    temperature: '18°C',
                    humidity: '70%',
                    wind: '8 km/h',
                    uvIndex: 'Low'
                },
                insights: [
                    { icon: 'fas fa-train', text: 'Use JR Pass for unlimited train travel around Japan' },
                    { icon: 'fas fa-utensils', text: 'Try authentic sushi at Tsukiji Fish Market' },
                    { icon: 'fas fa-shopping-bag', text: 'Visit Akihabara for electronics and anime goods' }
                ],
                itinerary: [
                    { time: '8:00 AM - 10:00 AM', activity: 'Senso-ji Temple' },
                    { time: '10:30 AM - 12:30 PM', activity: 'Tokyo Skytree' },
                    { time: '1:00 PM - 2:00 PM', activity: 'Lunch in Asakusa' },
                    { time: '2:30 PM - 4:30 PM', activity: 'Ueno Park and Museums' }
                ],
                trips: [
                    {
                        name: 'Tokyo Adventure',
                        description: '5-day exploration of modern and traditional Tokyo',
                        date: 'Jun 15-20, 2025',
                        people: 4,
                        tags: ['Culture', 'Food', 'Technology'],
                        icon: 'fas fa-torii-gate'
                    }
                ],
                places: [
                    {
                        id: 7,
                        name: 'Senso-ji Temple',
                        description: 'Ancient Buddhist temple, Tokyo\'s oldest religious site.',
                        type: 'temple',
                        rating: 4.5,
                        reviews: 8765,
                        image: 'fas fa-torii-gate',
                        tags: ['Temple', 'Historic', 'Cultural']
                    },
                    {
                        id: 8,
                        name: 'Tokyo Skytree',
                        description: 'Tallest structure in Japan with observation decks.',
                        type: 'tower',
                        rating: 4.4,
                        reviews: 6543,
                        image: 'fas fa-tower-observation',
                        tags: ['Tower', 'Views', 'Modern']
                    },
                    {
                        id: 9,
                        name: 'Shibuya Crossing',
                        description: 'World\'s busiest pedestrian crossing, iconic Tokyo scene.',
                        type: 'landmark',
                        rating: 4.3,
                        reviews: 5432,
                        image: 'fas fa-walking',
                        tags: ['Landmark', 'Urban', 'Iconic']
                    }
                ],
                hotels: [
                    {
                        id: 5,
                        name: 'Park Hyatt Tokyo',
                        description: 'Luxury hotel featured in "Lost in Translation" movie.',
                        rating: 4.8,
                        price: '¥52,000',
                        image: 'fas fa-hotel',
                        amenities: ['Luxury', 'Pool', 'Restaurant', 'Spa', 'Parking']
                    },
                    {
                        id: 6,
                        name: 'Hotel Gracery Shinjuku',
                        description: 'Godzilla-themed hotel in the heart of Shinjuku.',
                        rating: 4.2,
                        price: '¥15,000',
                        image: 'fas fa-hotel',
                        amenities: ['Themed', 'Central', 'Restaurant']
                    }
                ]
            },
            'London': {
                currency: 'GBP',
                weather: {
                    condition: 'Cloudy',
                    temperature: '15°C',
                    humidity: '75%',
                    wind: '10 km/h',
                    uvIndex: 'Low'
                },
                insights: [
                    { icon: 'fas fa-umbrella', text: 'Always carry an umbrella - London weather is unpredictable' },
                    { icon: 'fas fa-train', text: 'Use Oyster card for cheaper travel on public transport' },
                    { icon: 'fas fa-theater-masks', text: 'Book theater tickets in advance for best prices' }
                ],
                itinerary: [
                    { time: '9:30 AM - 11:30 AM', activity: 'Buckingham Palace' },
                    { time: '12:00 PM - 2:00 PM', activity: 'British Museum' },
                    { time: '2:30 PM - 3:30 PM', activity: 'Lunch in Covent Garden' },
                    { time: '4:00 PM - 6:00 PM', activity: 'London Eye' }
                ],
                trips: [
                    {
                        name: 'London Cultural Tour',
                        description: '6-day exploration of London\'s history and culture',
                        date: 'Jul 10-16, 2025',
                        people: 2,
                        tags: ['History', 'Culture', 'Royal'],
                        icon: 'fas fa-landmark'
                    }
                ],
                places: [
                    {
                        id: 10,
                        name: 'Big Ben',
                        description: 'Iconic clock tower at the Palace of Westminster.',
                        type: 'landmark',
                        rating: 4.6,
                        reviews: 9876,
                        image: 'fas fa-clock',
                        tags: ['Landmark', 'Historic', 'Iconic']
                    },
                    {
                        id: 11,
                        name: 'British Museum',
                        description: 'World-famous museum of human history and culture.',
                        type: 'museum',
                        rating: 4.7,
                        reviews: 7654,
                        image: 'fas fa-landmark',
                        tags: ['Museum', 'History', 'Free']
                    },
                    {
                        id: 12,
                        name: 'Tower of London',
                        description: 'Historic castle on the River Thames, home to the Crown Jewels.',
                        type: 'castle',
                        rating: 4.5,
                        reviews: 6543,
                        image: 'fas fa-chess-rook',
                        tags: ['Castle', 'History', 'Royal']
                    }
                ],
                hotels: [
                    {
                        id: 7,
                        name: 'The Savoy',
                        description: 'Iconic luxury hotel on the Strand, famous for its American Bar.',
                        rating: 4.9,
                        price: '£600',
                        image: 'fas fa-hotel',
                        amenities: ['Luxury', 'Restaurant', 'Bar', 'Spa', 'Parking']
                    },
                    {
                        id: 8,
                        name: 'The Z Hotel Shoreditch',
                        description: 'Boutique hotel in trendy Shoreditch with compact luxury rooms.',
                        rating: 4.3,
                        price: '£120',
                        image: 'fas fa-hotel',
                        amenities: ['Boutique', 'Central', 'Modern']
                    }
                ]
            },
            'New York': {
                currency: 'USD',
                weather: {
                    condition: 'Clear',
                    temperature: '22°C',
                    humidity: '60%',
                    wind: '15 km/h',
                    uvIndex: 'High'
                },
                insights: [
                    { icon: 'fas fa-subway', text: 'Get a MetroCard for unlimited subway and bus rides' },
                    { icon: 'fas fa-pizza-slice', text: 'Try a classic New York slice in Brooklyn' },
                    { icon: 'fas fa-theater-masks', text: 'Get TKTS tickets for Broadway shows at discount' }
                ],
                itinerary: [
                    { time: '8:00 AM - 10:00 AM', activity: 'Statue of Liberty' },
                    { time: '10:30 AM - 12:30 PM', activity: '9/11 Memorial' },
                    { time: '1:00 PM - 2:00 PM', activity: 'Lunch in Chinatown' },
                    { time: '2:30 PM - 5:00 PM', activity: 'Central Park' }
                ],
                trips: [
                    {
                        name: 'New York City Break',
                        description: '4-day city exploration including Broadway shows',
                        date: 'Aug 20-24, 2025',
                        people: 2,
                        tags: ['City', 'Entertainment', 'Shopping'],
                        icon: 'fas fa-city'
                    }
                ],
                places: [
                    {
                        id: 13,
                        name: 'Statue of Liberty',
                        description: 'Iconic symbol of freedom and democracy on Liberty Island.',
                        type: 'monument',
                        rating: 4.7,
                        reviews: 11234,
                        image: 'fas fa-monument',
                        tags: ['Monument', 'Historic', 'Iconic']
                    },
                    {
                        id: 14,
                        name: 'Central Park',
                        description: 'Vast urban park with walking paths, lakes, and recreational facilities.',
                        type: 'park',
                        rating: 4.8,
                        reviews: 15678,
                        image: 'fas fa-tree',
                        tags: ['Park', 'Nature', 'Recreation']
                    },
                    {
                        id: 15,
                        name: 'Times Square',
                        description: 'Bustling commercial intersection known for its bright billboards.',
                        type: 'landmark',
                        rating: 4.3,
                        reviews: 9876,
                        image: 'fas fa-city',
                        tags: ['Landmark', 'Shopping', 'Entertainment']
                    }
                ],
                hotels: [
                    {
                        id: 9,
                        name: 'The Plaza Hotel',
                        description: 'Iconic luxury hotel overlooking Central Park.',
                        rating: 4.8,
                        price: '$700',
                        image: 'fas fa-hotel',
                        amenities: ['Luxury', 'Central Park', 'Restaurant', 'Spa', 'Parking']
                    },
                    {
                        id: 10,
                        name: 'Pod Times Square',
                        description: 'Modern, efficient hotel with compact rooms in the heart of Times Square.',
                        rating: 4.1,
                        price: '$130',
                        image: 'fas fa-hotel',
                        amenities: ['Modern', 'Central', 'Efficient']
                    }
                ]
            },
            'Rome': {
                currency: 'EUR',
                weather: {
                    condition: 'Sunny',
                    temperature: '26°C',
                    humidity: '55%',
                    wind: '8 km/h',
                    uvIndex: 'High'
                },
                insights: [
                    { icon: 'fas fa-gem', text: 'Visit the Vatican Museums early to avoid long queues' },
                    { icon: 'fas fa-ice-cream', text: 'Try authentic gelato in the Trastevere neighborhood' },
                    { icon: 'fas fa-fountain', text: 'Throw a coin in Trevi Fountain to ensure your return to Rome' }
                ],
                itinerary: [
                    { time: '8:30 AM - 10:30 AM', activity: 'Colosseum' },
                    { time: '11:00 AM - 1:00 PM', activity: 'Roman Forum' },
                    { time: '1:30 PM - 2:30 PM', activity: 'Lunch near Piazza Navona' },
                    { time: '3:00 PM - 5:00 PM', activity: 'Vatican City and St. Peter\'s Basilica' }
                ],
                trips: [
                    {
                        name: 'Roman Holiday',
                        description: '5-day exploration of ancient Rome and Vatican City',
                        date: 'Sep 5-10, 2025',
                        people: 2,
                        tags: ['History', 'Ancient', 'Religious'],
                        icon: 'fas fa-landmark'
                    }
                ],
                places: [
                    {
                        id: 16,
                        name: 'Colosseum',
                        description: 'Ancient amphitheater that hosted gladiator contests and public spectacles.',
                        type: 'ruins',
                        rating: 4.8,
                        reviews: 13456,
                        image: 'fas fa-landmark',
                        tags: ['Ancient', 'Historic', 'Iconic']
                    },
                    {
                        id: 17,
                        name: 'Trevi Fountain',
                        description: 'Baroque fountain and famous wish-making spot.',
                        type: 'fountain',
                        rating: 4.5,
                        reviews: 9876,
                        image: 'fas fa-fountain',
                        tags: ['Fountain', 'Baroque', 'Wishes']
                    },
                    {
                        id: 18,
                        name: 'Vatican Museums',
                        description: 'Extensive art collections including the Sistine Chapel.',
                        type: 'museum',
                        rating: 4.7,
                        reviews: 11234,
                        image: 'fas fa-landmark',
                        tags: ['Museum', 'Art', 'Religious']
                    }
                ],
                hotels: [
                    {
                        id: 11,
                        name: 'Hotel Hassler Roma',
                        description: 'Luxury hotel at the top of the Spanish Steps with panoramic views.',
                        rating: 4.9,
                        price: '€650',
                        image: 'fas fa-hotel',
                        amenities: ['Luxury', 'Views', 'Restaurant', 'Spa', 'Parking']
                    },
                    {
                        id: 12,
                        name: 'The Inn at the Roman Forum',
                        description: 'Boutique hotel with ancient Roman ruins in its basement.',
                        rating: 4.6,
                        price: '€220',
                        image: 'fas fa-hotel',
                        amenities: ['Boutique', 'Historic', 'Unique']
                    }
                ]
            },
            'India': {
                currency: 'INR',
                weather: {
                    condition: 'Partly Cloudy',
                    temperature: '28°C',
                    humidity: '70%',
                    wind: '10 km/h',
                    uvIndex: 'High'
                },
                insights: [
                    { icon: 'fas fa-utensils', text: 'Try authentic street food at local markets' },
                    { icon: 'fas fa-train', text: 'Book train tickets in advance via IRCTC' },
                    { icon: 'fas fa-landmark', text: 'Visit historical monuments early to avoid crowds' }
                ],
                itinerary: [
                    { time: '8:00 AM - 10:00 AM', activity: 'Taj Mahal Visit' },
                    { time: '10:30 AM - 12:30 PM', activity: 'Agra Fort' },
                    { time: '1:00 PM - 2:00 PM', activity: 'Lunch at Local Restaurant' },
                    { time: '2:30 PM - 4:30 PM', activity: 'Fatehpur Sikri' }
                ],
                trips: [
                    {
                        name: 'Golden Triangle Tour',
                        description: '7-day cultural tour of Delhi, Agra, and Jaipur',
                        date: 'Oct 15-22, 2025',
                        people: 4,
                        tags: ['Culture', 'History', 'Architecture'],
                        icon: 'fas fa-monument'
                    }
                ],
                places: [
                    {
                        id: 19,
                        name: 'Taj Mahal',
                        description: 'Iconic white marble mausoleum and UNESCO World Heritage site.',
                        type: 'monument',
                        rating: 4.9,
                        reviews: 24567,
                        image: 'fas fa-monument',
                        tags: ['UNESCO', 'Architecture', 'Romantic']
                    },
                    {
                        id: 20,
                        name: 'Red Fort',
                        description: 'Historic fort in Delhi that served as the main residence of Mughal Emperors.',
                        type: 'fort',
                        rating: 4.6,
                        reviews: 12345,
                        image: 'fas fa-fort-awesome',
                        tags: ['Fort', 'History', 'Mughal']
                    },
                    {
                        id: 21,
                        name: 'Amber Fort',
                        description: 'Magnificent fort palace located in Amer, Rajasthan.',
                        type: 'fort',
                        rating: 4.7,
                        reviews: 9876,
                        image: 'fas fa-fort-awesome',
                        tags: ['Fort', 'Palace', 'Rajasthan']
                    }
                ],
                hotels: [
                    {
                        id: 13,
                        name: 'The Oberoi Amarvilas',
                        description: 'Luxury hotel with views of the Taj Mahal from every room.',
                        rating: 4.9,
                        price: '₹35,000',
                        image: 'fas fa-hotel',
                        amenities: ['Luxury', 'Taj View', 'Pool', 'Spa', 'Restaurant']
                    },
                    {
                        id: 14,
                        name: 'ITC Maurya',
                        description: 'Luxury hotel in Delhi known for its fine dining restaurants.',
                        rating: 4.7,
                        price: '₹18,000',
                        image: 'fas fa-hotel',
                        amenities: ['Luxury', 'Restaurant', 'Spa', 'Pool', 'Parking']
                    },
                    {
                        id: 15,
                        name: 'Rambagh Palace',
                        description: 'Former royal residence turned luxury hotel in Jaipur.',
                        rating: 4.8,
                        price: '₹25,000',
                        image: 'fas fa-hotel',
                        amenities: ['Palace', 'Luxury', 'Pool', 'Spa', 'Restaurant']
                    }
                ]
            }
        };

        const sampleExpenses = [
            { description: 'Hotel Booking', category: 'accommodation', amount: '₹5,000', date: '2025-05-10' },
            { description: 'Dinner at Restaurant', category: 'food', amount: '₹1,200', date: '2025-05-10' },
            { description: 'Museum Tickets', category: 'activities', amount: '₹800', date: '2025-05-11' },
            { description: 'Metro Pass', category: 'transportation', amount: '₹500', date: '2025-05-11' },
            { description: 'Souvenirs', category: 'shopping', amount: '₹1,500', date: '2025-05-12' }
        ];

        const sampleFlights = [
            { airline: 'Air India', departure: '09:00', arrival: '11:30', duration: '2h 30m', price: '₹8,500' },
            { airline: 'IndiGo', departure: '11:15', arrival: '13:45', duration: '2h 30m', price: '₹6,200' },
            { airline: 'SpiceJet', departure: '14:30', arrival: '17:00', duration: '2h 30m', price: '₹5,800' },
            { airline: 'Vistara', departure: '18:45', arrival: '21:15', duration: '2h 30m', price: '₹9,200' }
        ];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Set current time
            updateTime();
            setInterval(updateTime, 60000);
            
            // Load expense history
            loadExpenseHistory();
            
            // Set up event listeners
            setupEventListeners();
            
            // Load user settings from localStorage
            loadUserSettings();
            
            // Initialize with default destination
            updateCurrentDestination();
            
            // NEW: Setup AI features
            setupAIFeatures();
            
            // NEW: Setup payment functionality
            setupPaymentFunctionality();
            
            // NEW: Setup modal close functionality
            setupModalCloseFunctionality();
        });

        // Update current time
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            document.getElementById('currentTime').textContent = timeString;
        }

        // Set up all event listeners
        function setupEventListeners() {
            // Login/Signup functionality
            loginBtn.addEventListener('click', handleLogin);
            signupBtn.addEventListener('click', handleSignup);
            signupLink.addEventListener('click', toggleAuthForms);
            loginLink.addEventListener('click', toggleAuthForms);
            logoutBtn.addEventListener('click', handleLogout);

            // Navigation
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const screenId = this.getAttribute('data-screen') + '-screen';
                    
                    // Update active nav item
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding screen
                    screens.forEach(screen => screen.classList.remove('active'));
                    document.getElementById(screenId).classList.add('active');
                });
            });

            // Search functionality
            searchBtn.addEventListener('click', handleSearch);
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleSearch();
                }
            });

            // Destination search
            searchDestinationBtn.addEventListener('click', handleDestinationSearch);
            destinationInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleDestinationSearch();
                }
            });

            // Update current destination
            updateDestinationBtn.addEventListener('click', updateCurrentDestination);
            currentDestination.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    updateCurrentDestination();
                }
            });

            // Modal functionality
            emergencyBtn.addEventListener('click', function() {
                emergencyModal.style.display = 'flex';
            });

            // Budget and expense modals
            updateBudgetBtn.addEventListener('click', function() {
                budgetModal.style.display = 'flex';
            });

            addExpenseBtn.addEventListener('click', function() {
                expenseModal.style.display = 'flex';
            });

            // Feature cards
            featureCards.forEach(card => {
                card.addEventListener('click', function() {
                    const feature = this.getAttribute('data-feature');
                    openFeatureModal(feature);
                });
            });

            // Hotel booking
            bookHotels.addEventListener('click', function() {
                hotelBookingSection.style.display = hotelBookingSection.style.display === 'none' ? 'block' : 'none';
                if (hotelBookingSection.style.display === 'block') {
                    loadHotels(currentUserDestination || 'India');
                }
            });

            // Flight booking
            bookFlights.addEventListener('click', function() {
                flightSearchSection.style.display = flightSearchSection.style.display === 'none' ? 'block' : 'none';
                if (flightSearchSection.style.display === 'block') {
                    hotelBookingSection.style.display = 'none';
                    transportSection.style.display = 'none';
                }
            });

            // Transport booking
            bookTransport.addEventListener('click', function() {
                transportSection.style.display = transportSection.style.display === 'none' ? 'block' : 'none';
                if (transportSection.style.display === 'block') {
                    hotelBookingSection.style.display = 'none';
                    flightSearchSection.style.display = 'none';
                }
            });

            // Flight search
            searchFlightsBtn.addEventListener('click', function() {
                const from = document.getElementById('flightFrom').value;
                const to = document.getElementById('flightTo').value;
                const date = document.getElementById('flightDate').value;
                const travelers = document.getElementById('flightTravelers').value;
                
                if (from && to && date) {
                    searchFlights(from, to, date, travelers);
                } else {
                    alert('Please fill in all flight search fields');
                }
            });

            // Transport options
            document.querySelectorAll('.transport-option').forEach(option => {
                option.addEventListener('click', function() {
                    const transport = this.getAttribute('data-transport');
                    alert(`Searching for ${transport} options...`);
                });
            });

            // Currency converter
            setupCurrencyConverter();

            // AI Chat
            setupAIChat();

            // Emergency contacts
            setupEmergencyContacts();

            // Place filters
            setupPlaceFilters();

            // Hotel filters
            setupHotelFilters();

            // AI Suggestions
            setupAISuggestions();

            // Voice translation
            setupVoiceTranslation();

            // Translation
            translateBtn.addEventListener('click', handleTranslation);

            // Settings
            saveSettings.addEventListener('click', saveUserSettings);

            // AI Plan Generation
            generatePlan.addEventListener('click', generateAIPlan);

            // Budget saving
            document.getElementById('saveBudget').addEventListener('click', saveBudget);

            // Expense saving
            document.getElementById('saveExpense').addEventListener('click', saveExpense);

            // Get directions
            getDirectionsBtn.addEventListener('click', getDirections);

            // Booking options
            document.querySelectorAll('.booking-option').forEach(option => {
                option.addEventListener('click', function() {
                    const optionType = this.id;
                    handleBookingOption(optionType);
                });
            });

            // Voice commands for AI assistant
            setupVoiceCommands();

            // Packing Done Button
            packingDoneBtn.addEventListener('click', function() {
                const allChecked = Array.from(document.querySelectorAll('#packingList input[type="checkbox"]'))
                    .every(checkbox => checkbox.checked);
                
                if (allChecked) {
                    alert('Great! Your packing is complete. Have a safe trip!');
                    this.style.background = 'var(--success)';
                    this.innerHTML = '<i class="fas fa-check-circle"></i> Packing Complete!';
                } else {
                    alert('Please check all items before marking packing as done.');
                }
            });

            // NEW: SmartTrip AI Preference Options
            document.querySelectorAll('.preference-option input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const option = this.closest('.preference-option');
                    if (this.checked) {
                        option.classList.add('selected');
                    } else {
                        option.classList.remove('selected');
                    }
                });
            });
        }

        // NEW: Setup Modal Close Functionality
        function setupModalCloseFunctionality() {
            // Close payment modal
            closePaymentModal.addEventListener('click', function() {
                paymentModal.style.display = 'none';
            });
            
            // Close emergency modal
            closeEmergencyModal.addEventListener('click', function() {
                emergencyModal.style.display = 'none';
            });
            
            // Close budget modal
            closeBudgetModal.addEventListener('click', function() {
                budgetModal.style.display = 'none';
            });
            
            // Close expense modal
            closeExpenseModal.addEventListener('click', function() {
                expenseModal.style.display = 'none';
            });
            
            // Close AI planner modal
            closeAIPlannerModal.addEventListener('click', function() {
                aiPlannerModal.style.display = 'none';
            });
            
            // Close place details modal
            closePlaceDetailsModal.addEventListener('click', function() {
                placeDetailsModal.style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
                if (e.target.classList.contains('place-details-modal')) {
                    e.target.style.display = 'none';
                }
                if (e.target.classList.contains('payment-modal')) {
                    e.target.style.display = 'none';
                }
                if (e.target.classList.contains('confirmation-modal')) {
                    e.target.style.display = 'none';
                }
                if (e.target.classList.contains('emergency-modal')) {
                    e.target.style.display = 'none';
                }
            });
        }

        // NEW: Setup Payment Functionality
        function setupPaymentFunctionality() {
            // Add event listeners for Book Now buttons in flight results
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('book-now-btn') && e.target.closest('.flight-item')) {
                    const flightItem = e.target.closest('.flight-item');
                    const flightInfo = flightItem.querySelector('.flight-info');
                    const flightPrice = flightItem.querySelector('.flight-price').textContent;
                    
                    // Extract flight details
                    const airline = flightInfo.querySelector('h4').textContent;
                    const timing = flightInfo.querySelector('p').textContent;
                    
                    // Open payment modal with flight details
                    openPaymentModal(airline, timing, flightPrice);
                }
            });
            
            // Payment method selection
            paymentMethods.forEach(method => {
                method.addEventListener('click', function() {
                    // Remove selected class from all methods
                    paymentMethods.forEach(m => {
                        m.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked method
                    this.classList.add('selected');
                    
                    // Show corresponding payment form
                    const methodType = this.getAttribute('data-method');
                    showPaymentForm(methodType);
                });
            });
            
            // Confirm payment button
            confirmPayment.addEventListener('click', function() {
                processPayment();
            });
            
            // Cancel payment button
            cancelPayment.addEventListener('click', function() {
                paymentModal.style.display = 'none';
            });
            
            // Close confirmation modal
            closeConfirmation.addEventListener('click', function() {
                confirmationModal.style.display = 'none';
            });
            
            // Card number formatting
            document.getElementById('cardNumber').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
                let formattedValue = '';
                
                for (let i = 0; i < value.length; i++) {
                    if (i > 0 && i % 4 === 0) {
                        formattedValue += ' ';
                    }
                    formattedValue += value[i];
                }
                
                e.target.value = formattedValue;
            });
            
            // Expiry date formatting
            document.getElementById('expiryDate').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
                
                if (value.length >= 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2, 4);
                }
                
                e.target.value = value;
            });
            
            // CVV formatting
            document.getElementById('cvv').addEventListener('input', function(e) {
                e.target.value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
            });
        }

        // NEW: Setup AI Features
        function setupAIFeatures() {
            // Mood selection
            moodEmojis.forEach(emoji => {
                emoji.addEventListener('click', function() {
                    moodEmojis.forEach(e => e.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // In a real app, this would save the mood and provide personalized content
                    const mood = this.textContent;
                    let message = '';
                    
                    switch(mood) {
                        case '😊':
                            message = "Great to see you're happy! Today would be perfect for exploring vibrant markets and lively neighborhoods.";
                            break;
                        case '😄':
                            message = "You're excited! Let's plan an adventurous day with thrilling activities and new experiences!";
                            break;
                        case '😌':
                            message = "Feeling relaxed? How about a peaceful day visiting gardens, spas, or quiet cultural sites?";
                            break;
                        case '😐':
                            message = "Neutral mood? Let's find some inspiring art galleries or scenic viewpoints to lift your spirits.";
                            break;
                        case '😔':
                            message = "Feeling down? A cozy café, beautiful park, or comforting local food might help brighten your day.";
                            break;
                    }
                    
                    // Display mood-based suggestion
                    const journalScreen = document.getElementById('travel-journal-screen');
                    const moodMessage = document.createElement('div');
                    moodMessage.className = 'feature-detail';
                    moodMessage.innerHTML = `<h3><i class="fas fa-lightbulb"></i> Mood-Based Suggestion</h3><p>${message}</p>`;
                    
                    // Remove any existing mood message
                    const existingMessage = journalScreen.querySelector('.mood-message');
                    if (existingMessage) {
                        existingMessage.remove();
                    }
                    
                    moodMessage.classList.add('mood-message');
                    journalScreen.insertBefore(moodMessage, journalScreen.querySelector('.travel-journal'));
                });
            });
            
            // Journal entry
            addJournalEntry.addEventListener('click', function() {
                alert('In a full implementation, this would open a journal entry form');
            });
            
            // Social interactions
            document.querySelectorAll('.social-action').forEach(action => {
                action.addEventListener('click', function() {
                    const actionType = this.querySelector('i').className;
                    if (actionType.includes('heart')) {
                        this.classList.toggle('liked');
                        if (this.classList.contains('liked')) {
                            const currentLikes = parseInt(this.textContent);
                            this.innerHTML = '<i class="fas fa-heart"></i> ' + (currentLikes + 1);
                        } else {
                            const currentLikes = parseInt(this.textContent);
                            this.innerHTML = '<i class="fas fa-heart"></i> ' + (currentLikes - 1);
                        }
                    }
                });
            });
            
            // Connect with guides
            document.querySelectorAll('.local-guide .action-button').forEach(button => {
                button.addEventListener('click', function() {
                    const guideName = this.closest('.local-guide').querySelector('h4').textContent;
                    alert(`Connecting you with ${guideName}...`);
                    this.textContent = 'Connected';
                    this.style.background = 'var(--success)';
                });
            });
        }

        // NEW: Payment Functions
        function openPaymentModal(airline, timing, price) {
            // Extract numeric price value
            const priceValue = parseInt(price.replace(/[^0-9]/g, ''));
            const taxes = Math.round(priceValue * 0.18); // 18% tax
            const total = priceValue + taxes + 200; // Add service charge
            
            // Update payment modal with flight details
            document.getElementById('paymentFlight').textContent = `${airline} - ${timing}`;
            document.getElementById('paymentPrice').textContent = `₹${priceValue.toLocaleString()}`;
            document.getElementById('paymentTaxes').textContent = `₹${taxes.toLocaleString()}`;
            document.getElementById('paymentTotal').textContent = `₹${total.toLocaleString()}`;
            
            // Show payment modal
            paymentModal.style.display = 'flex';
        }
        
        function showPaymentForm(methodType) {
            // Hide all payment forms
            cardPaymentForm.style.display = 'none';
            upiPaymentForm.style.display = 'none';
            netbankingPaymentForm.style.display = 'none';
            
            // Show selected payment form
            if (methodType === 'card') {
                cardPaymentForm.style.display = 'block';
            } else if (methodType === 'upi') {
                upiPaymentForm.style.display = 'block';
            } else if (methodType === 'netbanking') {
                netbankingPaymentForm.style.display = 'block';
            }
        }
        
        function processPayment() {
            const selectedMethod = document.querySelector('.payment-method.selected').getAttribute('data-method');
            let isValid = true;
            
            // Validate form based on selected payment method
            if (selectedMethod === 'card') {
                const cardNumber = document.getElementById('cardNumber').value;
                const expiryDate = document.getElementById('expiryDate').value;
                const cvv = document.getElementById('cvv').value;
                const cardName = document.getElementById('cardName').value;
                
                if (!cardNumber || cardNumber.replace(/\s/g, '').length !== 16) {
                    alert('Please enter a valid 16-digit card number');
                    isValid = false;
                } else if (!expiryDate || !/^\d{2}\/\d{2}$/.test(expiryDate)) {
                    alert('Please enter a valid expiry date (MM/YY)');
                    isValid = false;
                } else if (!cvv || cvv.length !== 3) {
                    alert('Please enter a valid 3-digit CVV');
                    isValid = false;
                } else if (!cardName) {
                    alert('Please enter the name on card');
                    isValid = false;
                }
            } else if (selectedMethod === 'upi') {
                const upiId = document.getElementById('upiId').value;
                if (!upiId || !/^[a-zA-Z0-9.\-_]{2,256}@[a-zA-Z]{2,64}$/.test(upiId)) {
                    alert('Please enter a valid UPI ID');
                    isValid = false;
                }
            } else if (selectedMethod === 'netbanking') {
                const bankSelect = document.getElementById('bankSelect').value;
                if (!bankSelect) {
                    alert('Please select your bank');
                    isValid = false;
                }
            }
            
            if (isValid) {
                // Simulate payment processing
                confirmPayment.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                confirmPayment.disabled = true;
                
                // Simulate API call delay
                setTimeout(() => {
                    // Show confirmation modal
                    paymentModal.style.display = 'none';
                    confirmationModal.style.display = 'flex';
                    
                    // Generate random booking reference
                    const ref = 'TRVPL-' + Math.random().toString(36).substring(2, 10).toUpperCase();
                    document.getElementById('bookingReference').textContent = ref;
                    
                    // Reset payment button
                    confirmPayment.innerHTML = 'Confirm Payment';
                    confirmPayment.disabled = false;
                    
                    // Reset form
                    document.getElementById('cardNumber').value = '';
                    document.getElementById('expiryDate').value = '';
                    document.getElementById('cvv').value = '';
                    document.getElementById('cardName').value = '';
                    document.getElementById('upiId').value = '';
                    document.getElementById('bankSelect').value = '';
                }, 2000);
            }
        }

        // Authentication functions
        function handleLogin() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            if (email && password) {
                loginScreen.style.display = 'none';
                // In a real app, you would validate credentials with a backend
            } else {
                alert('Please enter both email and password');
            }
        }

        function handleSignup() {
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (name && email && password && confirmPassword) {
                if (password === confirmPassword) {
                    loginScreen.style.display = 'none';
                    // In a real app, you would send this data to a backend
                } else {
                    alert('Passwords do not match');
                }
            } else {
                alert('Please fill in all fields');
            }
        }

        function toggleAuthForms() {
            if (loginForm.style.display === 'none') {
                loginForm.style.display = 'block';
                signupForm.style.display = 'none';
            } else {
                loginForm.style.display = 'none';
                signupForm.style.display = 'block';
            }
        }

        function handleLogout() {
            loginScreen.style.display = 'flex';
            // Reset to login form
            loginForm.style.display = 'block';
            signupForm.style.display = 'none';
        }

        // Search functionality
        function handleSearch() {
            const query = searchInput.value.trim();
            
            if (query) {
                // Show search results
                searchResults.classList.add('active');
                
                // Clear previous results
                searchResultsList.innerHTML = '';
                
                // Simulate search results
                const results = [
                    { title: 'Eiffel Tower Tours', description: 'Skip-the-line tickets and guided tours of the iconic Eiffel Tower.', tags: ['Tours', 'Landmark'] },
                    { title: 'Paris City Pass', description: 'Access to multiple attractions with one convenient pass.', tags: ['Discount', 'Convenient'] },
                    { title: 'Seine River Dinner Cruise', description: 'Romantic dinner cruise with views of Paris landmarks.', tags: ['Dining', 'Romantic'] },
                    { title: 'Louvre Museum Guided Tour', description: 'Expert-guided tour of the world\'s largest art museum.', tags: ['Art', 'Museum'] },
                    { title: 'Montmartre Walking Tour', description: 'Explore the artistic neighborhood with a local guide.', tags: ['Walking', 'Artsy'] }
                ];
                
                // Add results to the list
                results.forEach(result => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'search-result-item';
                    resultItem.innerHTML = `
                        <h4>${result.title}</h4>
                        <p>${result.description}</p>
                        ${result.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    `;
                    searchResultsList.appendChild(resultItem);
                });
                
                // Scroll to results
                searchResults.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Destination search
        function handleDestinationSearch() {
            const destination = destinationInput.value.trim();
            
            if (destination) {
                loadDestination(destination);
                updateMap(destination, 'exploreMapContainer');
            }
        }

        function updateCurrentDestination() {
            const destination = currentDestination.value.trim() || 'India';
            
            if (destination) {
                currentUserDestination = destination;
                updateDestinationData(destination);
                updateMap(destination, 'mapContainer');
            }
        }

        function updateDestinationData(destination) {
            const data = destinationData[destination] || destinationData['India'];
            
            // Update weather
            currentLocation.textContent = destination;
            currentWeather.textContent = `${data.weather.condition}, ${data.weather.temperature}`;
            
            // Update weather details
            document.querySelectorAll('.weather-detail p:last-child')[0].textContent = data.weather.humidity;
            document.querySelectorAll('.weather-detail p:last-child')[1].textContent = data.weather.wind;
            document.querySelectorAll('.weather-detail p:last-child')[2].textContent = data.weather.uvIndex;
            
            // Update local insights
            localInsightsContent.innerHTML = '';
            data.insights.forEach(insight => {
                const insightItem = document.createElement('div');
                insightItem.className = 'insight-item';
                insightItem.innerHTML = `
                    <i class="${insight.icon}"></i>
                    <p>${insight.text}</p>
                `;
                localInsightsContent.appendChild(insightItem);
            });
            
            // Update itinerary
            timelineContent.innerHTML = '';
            data.itinerary.forEach(item => {
                const timelineEvent = document.createElement('div');
                timelineEvent.className = 'timeline-event';
                timelineEvent.innerHTML = `
                    <h4>${item.activity}</h4>
                    <p>${item.time}</p>
                `;
                timelineContent.appendChild(timelineEvent);
            });
            
            // Update trips
            tripsContainer.innerHTML = '';
            data.trips.forEach(trip => {
                const tripCard = document.createElement('div');
                tripCard.className = 'trip-card';
                tripCard.innerHTML = `
                    <div class="trip-image">
                        <i class="${trip.icon}"></i>
                    </div>
                    <div class="trip-info">
                        <h3>${trip.name}</h3>
                        <p>${trip.description}</p>
                        <div class="trip-meta">
                            <span><i class="far fa-calendar"></i> ${trip.date}</span>
                            <span><i class="fas fa-users"></i> ${trip.people} people</span>
                        </div>
                        <div>
                            ${trip.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                `;
                tripsContainer.appendChild(tripCard);
            });
            
            // Update map placeholder
            mapPlaceholder.innerHTML = `<p>Map of ${destination}</p>`;
            
            // Update currency converter
            updateCurrencyConverter(destination);
            
            // Update budget display
            updateBudgetDisplay();
        }

        function loadDestination(destination) {
            // Update places title
            document.getElementById('placesTitle').textContent = `Popular Tourist Places in ${destination}`;
            
            // Clear previous places
            placesContainer.innerHTML = '';
            
            // Get places for destination or default to India
            const data = destinationData[destination] || destinationData['India'];
            const places = data.places;
            
            // Add places to container
            places.forEach(place => {
                const placeCard = document.createElement('div');
                placeCard.className = 'place-card';
                placeCard.innerHTML = `
                    <div class="place-image" style="background: linear-gradient(135deg, var(--primary), var(--primary-dark));">
                        <i class="${place.image}"></i>
                    </div>
                    <div class="place-info">
                        <h3>${place.name}</h3>
                        <p>${place.description}</p>
                        <div class="place-rating">
                            <i class="fas fa-star"></i>
                            <span>${place.rating} (${place.reviews.toLocaleString()} reviews)</span>
                        </div>
                        <div>
                            ${place.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                `;
                
                // Add click event to show place details
                placeCard.addEventListener('click', function() {
                    showPlaceDetails(place, destination);
                });
                
                placesContainer.appendChild(placeCard);
            });
            
            // Update map placeholder
            exploreMapPlaceholder.innerHTML = `<p>Map of ${destination}</p>`;
        }

        function loadHotels(destination) {
            // Clear previous hotels
            hotelList.innerHTML = '';
            
            // Get hotels for destination or default to India
            const data = destinationData[destination] || destinationData['India'];
            const hotels = data.hotels;
            
            // Add hotels to list
            hotels.forEach(hotel => {
                const hotelItem = document.createElement('div');
                hotelItem.className = 'hotel-item';
                hotelItem.innerHTML = `
                    <div class="hotel-info">
                        <div class="hotel-image">
                            <i class="${hotel.image}"></i>
                        </div>
                        <div class="hotel-details">
                            <h4>${hotel.name}</h4>
                            <p>${hotel.description}</p>
                            <div class="place-rating">
                                <i class="fas fa-star"></i>
                                <span>${hotel.rating}</span>
                            </div>
                            <div class="hotel-price">${hotel.price}/night</div>
                            <button class="book-now-btn">Book Now</button>
                        </div>
                    </div>
                `;
                
                hotelList.appendChild(hotelItem);
            });
        }

        function searchFlights(from, to, date, travelers) {
            // Show flight results
            flightResults.style.display = 'block';
            flightResults.innerHTML = '';
            
            // Add flight results
            sampleFlights.forEach(flight => {
                const flightItem = document.createElement('div');
                flightItem.className = 'flight-item';
                flightItem.innerHTML = `
                    <div class="flight-info">
                        <h4>${flight.airline}</h4>
                        <p>${flight.departure} - ${flight.arrival} (${flight.duration})</p>
                    </div>
                    <div class="flight-price">${flight.price}</div>
                    <button class="book-now-btn">Book Now</button>
                `;
                flightResults.appendChild(flightItem);
            });
        }

        function showPlaceDetails(place, destination) {
            // Update modal content
            document.getElementById('placeDetailsTitle').innerHTML = `<i class="${place.image}"></i> ${place.name}`;
            document.getElementById('placeName').textContent = place.name;
            document.getElementById('placeRating').textContent = place.rating;
            document.getElementById('placeReviews').textContent = `(${place.reviews.toLocaleString()} reviews)`;
            document.getElementById('placeDescription').textContent = place.description;
            document.getElementById('placeImageLarge').innerHTML = `<i class="${place.image}"></i>`;
            
            // Store destination for directions
            document.getElementById('getDirectionsBtn').setAttribute('data-destination', destination);
            document.getElementById('getDirectionsBtn').setAttribute('data-place', place.name);
            
            // Show modal
            placeDetailsModal.style.display = 'flex';
        }

        function loadExpenseHistory() {
            // Clear previous expenses
            expenseHistoryList.innerHTML = '';
            
            // Add expenses to history
            sampleExpenses.forEach(expense => {
                const expenseItem = document.createElement('div');
                expenseItem.className = 'expense-history-item';
                expenseItem.innerHTML = `
                    <div class="expense-history-category">
                        <i class="fas fa-${getExpenseIcon(expense.category)}"></i>
                        <span>${expense.description}</span>
                    </div>
                    <div class="expense-history-amount">${expense.amount}</div>
                `;
                
                expenseHistoryList.appendChild(expenseItem);
            });
        }

        function getExpenseIcon(category) {
            switch(category) {
                case 'accommodation': return 'hotel';
                case 'food': return 'utensils';
                case 'activities': return 'ticket-alt';
                case 'transportation': return 'subway';
                case 'shopping': return 'shopping-bag';
                default: return 'receipt';
            }
        }

        function openFeatureModal(feature) {
            switch(feature) {
                case 'ai-planner':
                    aiPlannerModal.style.display = 'flex';
                    break;
                case 'ar-navigation':
                    alert('RealityTour AR Navigation: Point your camera to see navigation overlays in augmented reality!');
                    break;
                case 'safety-detection':
                    alert('HealthSafe: Monitoring local health advisories and safety conditions in your area.');
                    break;
                case 'local-guides':
                    alert('Gramin Guide: Connecting you with verified local guides for authentic experiences.');
                    break;
                case 'expense-splitter':
                    alert('SmartShare: Easily split expenses with your travel companions.');
                    break;
                case 'cultural-mode':
                    alert('DesiVibe: Cultural insights and etiquette tips for your destination.');
                    break;
                case 'offline-mode':
                    alert('NoNet Survival: Download maps and guides for offline use.');
                    break;
                case 'voice-commands':
                    alert('Voice Travel: Use voice commands to navigate the app hands-free.');
                    break;
            }
        }

        function setupCurrencyConverter() {
            const amountInput = document.getElementById('amount');
            const fromCurrency = document.getElementById('fromCurrency');
            const toCurrency = document.getElementById('toCurrency');
            const converterResult = document.getElementById('converterResult');
            const swapCurrencies = document.getElementById('swapCurrencies');
            const saveConversion = document.getElementById('saveConversion');

            // Sample exchange rates (in a real app, these would come from an API)
            const exchangeRates = {
                USD: 1,
                EUR: 0.85,
                GBP: 0.73,
                JPY: 110.5,
                INR: 74.5,
                CAD: 1.25,
                AUD: 1.35
            };

            function convertCurrency() {
                const amount = parseFloat(amountInput.value) || 0;
                const from = fromCurrency.value;
                const to = toCurrency.value;
                
                // Convert to USD first, then to target currency
                const amountInUSD = amount / exchangeRates[from];
                const convertedAmount = amountInUSD * exchangeRates[to];
                
                // Format the result
                const formattedAmount = convertedAmount.toLocaleString(undefined, {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                });
                
                converterResult.textContent = `${amount} ${from} = ${formattedAmount} ${to}`;
            }

            // Initial conversion
            convertCurrency();

            // Event listeners
            amountInput.addEventListener('input', convertCurrency);
            fromCurrency.addEventListener('change', convertCurrency);
            toCurrency.addEventListener('change', convertCurrency);

            swapCurrencies.addEventListener('click', function() {
                const temp = fromCurrency.value;
                fromCurrency.value = toCurrency.value;
                toCurrency.value = temp;
                convertCurrency();
            });

            saveConversion.addEventListener('click', function() {
                alert('Conversion rate saved to your travel notes!');
            });
        }

        function updateCurrencyConverter(destination) {
            const data = destinationData[destination] || destinationData['India'];
            const currency = data.currency;
            
            // Update toCurrency to match destination currency
            document.getElementById('toCurrency').value = currency;
            
            // Trigger conversion
            const convertEvent = new Event('change');
            document.getElementById('toCurrency').dispatchEvent(convertEvent);
        }

        function setupAIChat() {
            const chatInput = document.getElementById('chatInput');
            const sendMessage = document.getElementById('sendMessage');
            const aiChat = document.getElementById('aiChat');
            const chatInputFull = document.getElementById('chatInputFull');
            const sendMessageFull = document.getElementById('sendMessageFull');
            const aiChatFull = document.getElementById('aiChatFull');

            function addMessage(chatElement, message, isUser) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `chat-message ${isUser ? 'user' : 'ai'}`;
                messageDiv.innerHTML = `<p>${message}</p>`;
                chatElement.appendChild(messageDiv);
                chatElement.scrollTop = chatElement.scrollHeight;
            }

            function handleUserMessage(inputElement, chatElement) {
                const message = inputElement.value.trim();
                if (message) {
                    addMessage(chatElement, message, true);
                    inputElement.value = '';
                    
                    // Simulate AI response after a short delay
                    setTimeout(() => {
                        const responses = [
                            "Based on your preferences, I'd recommend visiting Montmartre for its artistic vibe and stunning city views.",
                            "The best time to visit that attraction is early morning to avoid crowds.",
                            "I found several highly-rated restaurants in that area. Would you like me to show you the top options?",
                            "For transportation, I suggest using the metro system as it's efficient and cost-effective.",
                            "That's a great choice! I can help you create a detailed itinerary for your visit there."
                        ];
                        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                        addMessage(chatElement, randomResponse, false);
                    }, 1000);
                }
            }

            sendMessage.addEventListener('click', function() {
                handleUserMessage(chatInput, aiChat);
            });

            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleUserMessage(chatInput, aiChat);
                }
            });

            sendMessageFull.addEventListener('click', function() {
                handleUserMessage(chatInputFull, aiChatFull);
            });

            chatInputFull.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleUserMessage(chatInputFull, aiChatFull);
                }
            });
        }

        function setupEmergencyContacts() {
            const emergencyContacts = document.querySelectorAll('.emergency-contact');
            const emergencyOptions = document.querySelectorAll('.emergency-option');
            const sosButton = document.getElementById('sosButton');

            emergencyContacts.forEach(contact => {
                contact.addEventListener('click', function() {
                    const type = this.getAttribute('data-contact');
                    let url = '';
                    
                    switch(type) {
                        case 'police':
                            url = 'https://www.google.com/maps/search/police+station+near+me';
                            break;
                        case 'ambulance':
                            url = 'https://www.google.com/maps/search/hospital+near+me';
                            break;
                        case 'fire':
                            url = 'https://www.google.com/maps/search/fire+station+near+me';
                            break;
                        case 'personal':
                            alert('Calling your emergency contact...');
                            return;
                    }
                    
                    window.open(url, '_blank');
                });
            });

            emergencyOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const type = this.getAttribute('data-type');
                    let url = '';
                    
                    switch(type) {
                        case 'police':
                            url = 'https://www.google.com/maps/search/police+station+near+me';
                            break;
                        case 'ambulance':
                            url = 'https://www.google.com/maps/search/hospital+near+me';
                            break;
                        case 'fire':
                            url = 'https://www.google.com/maps/search/fire+station+near+me';
                            break;
                        case 'personal':
                            alert('Notifying your emergency contacts...');
                            return;
                    }
                    
                    window.open(url, '_blank');
                });
            });

            sosButton.addEventListener('click', function() {
                alert('SOS ALERT: Your location and emergency details have been sent to local authorities and your emergency contacts!');
                // In a real app, this would trigger actual emergency protocols
            });
        }

        function setupPlaceFilters() {
            // Sort places
            sortPlaces.addEventListener('change', function() {
                const sortBy = this.value;
                // In a real app, you would sort the places based on the selected criteria
                alert(`Sorting places by ${sortBy}`);
            });

            // Filter places by type
            document.querySelectorAll('#placeFilters .filter-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    // Remove active class from all tags
                    document.querySelectorAll('#placeFilters .filter-tag').forEach(t => {
                        t.classList.remove('active');
                    });
                    
                    // Add active class to clicked tag
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    // In a real app, you would filter the places based on the selected type
                    alert(`Filtering places by ${filter}`);
                });
            });
        }

        function setupHotelFilters() {
            // Sort hotels
            sortHotels.addEventListener('change', function() {
                const sortBy = this.value;
                // In a real app, you would sort the hotels based on the selected criteria
                alert(`Sorting hotels by ${sortBy}`);
            });

            // Filter hotels by amenity
            document.querySelectorAll('#hotelFilters .filter-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    // Remove active class from all tags
                    document.querySelectorAll('#hotelFilters .filter-tag').forEach(t => {
                        t.classList.remove('active');
                    });
                    
                    // Add active class to clicked tag
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    // In a real app, you would filter the hotels based on the selected amenity
                    alert(`Filtering hotels by ${filter}`);
                });
            });
        }

        function setupAISuggestions() {
            aiSuggestions.forEach(suggestion => {
                suggestion.addEventListener('click', function() {
                    const type = this.getAttribute('data-suggestion');
                    const aiChatFull = document.getElementById('aiChatFull');
                    
                    let message = '';
                    switch(type) {
                        case 'plan-trip':
                            message = "I'd love to help you plan a trip! Please tell me your destination, travel dates, and any preferences you have.";
                            break;
                        case 'destination':
                            message = "Looking for destination ideas? I can suggest places based on your interests, budget, and travel style.";
                            break;
                        case 'budget':
                            message = "Let's plan your travel budget! Tell me your destination and trip duration, and I'll help estimate costs.";
                            break;
                        case 'packing':
                            message = "Need packing tips? I can create a customized packing list based on your destination, weather, and activities.";
                            break;
                    }
                    
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'chat-message ai';
                    messageDiv.innerHTML = `<p>${message}</p>`;
                    aiChatFull.appendChild(messageDiv);
                    aiChatFull.scrollTop = aiChatFull.scrollHeight;
                });
            });
        }

        function setupVoiceTranslation() {
            let recognition;
            
            // Check if browser supports speech recognition
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';
                
                recognition.onstart = function() {
                    voiceTranslateBtn.classList.add('listening');
                    voiceTranslateStatus.textContent = 'Listening...';
                };
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    textToTranslate.value = transcript;
                    voiceTranslateStatus.textContent = 'Speech captured. Click Translate.';
                };
                
                recognition.onerror = function(event) {
                    voiceTranslateStatus.textContent = 'Error occurred in recognition: ' + event.error;
                };
                
                recognition.onend = function() {
                    voiceTranslateBtn.classList.remove('listening');
                };
            } else {
                voiceTranslateStatus.textContent = 'Speech recognition not supported in this browser';
                voiceTranslateBtn.style.display = 'none';
            }
            
            voiceTranslateBtn.addEventListener('click', function() {
                if (recognition) {
                    recognition.start();
                }
            });
        }

        function setupVoiceCommands() {
            let recognition;
            
            // Check if browser supports speech recognition
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript.toLowerCase();
                    handleVoiceCommand(transcript);
                };
                
                recognition.onerror = function(event) {
                    console.log('Error occurred in recognition: ' + event.error);
                };
            }
            
            // Add voice command button to AI assistant
            const voiceCommandBtn = document.createElement('button');
            voiceCommandBtn.innerHTML = '<i class="fas fa-microphone"></i>';
            voiceCommandBtn.className = 'voice-command-btn';
            voiceCommandBtn.style.cssText = 'background: var(--accent); border: none; color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; margin-left: 10px;';
            
            const aiHeader = document.querySelector('.ai-header');
            aiHeader.appendChild(voiceCommandBtn);
            
            voiceCommandBtn.addEventListener('click', function() {
                if (recognition) {
                    recognition.start();
                    // Add visual feedback
                    this.style.background = 'var(--danger)';
                    setTimeout(() => {
                        this.style.background = 'var(--accent)';
                    }, 1000);
                } else {
                    alert('Voice recognition not supported in this browser');
                }
            });
        }

        function handleVoiceCommand(command) {
            const aiChat = document.getElementById('aiChat');
            const aiChatFull = document.getElementById('aiChatFull');
            
            // Add user message to chat
            const userMessageDiv = document.createElement('div');
            userMessageDiv.className = 'chat-message user';
            userMessageDiv.innerHTML = `<p>${command}</p>`;
            aiChat.appendChild(userMessageDiv);
            aiChatFull.appendChild(userMessageDiv.cloneNode(true));
            
            // Process command and generate response
            let response = '';
            
            if (command.includes('weather') || command.includes('forecast')) {
                response = `The weather in ${currentUserDestination || 'your destination'} is currently ${destinationData[currentUserDestination]?.weather?.condition || 'unknown'}.`;
            } else if (command.includes('hotel') || command.includes('accommodation')) {
                response = "I can help you find hotels. Would you like me to show you some options?";
            } else if (command.includes('flight') || command.includes('airplane')) {
                response = "I can help you search for flights. Please tell me your departure and destination cities.";
            } else if (command.includes('restaurant') || command.includes('food')) {
                response = "I can recommend some great restaurants in the area. What type of cuisine are you interested in?";
            } else if (command.includes('attraction') || command.includes('place to visit')) {
                response = "There are many great attractions to visit. Would you like me to suggest some based on your interests?";
            } else if (command.includes('budget') || command.includes('money')) {
                response = "I can help you manage your travel budget. Would you like to set a budget or track your expenses?";
            } else {
                response = "I'm not sure I understand. Could you please rephrase your question?";
            }
            
            // Add AI response after a short delay
            setTimeout(() => {
                const aiMessageDiv = document.createElement('div');
                aiMessageDiv.className = 'chat-message ai';
                aiMessageDiv.innerHTML = `<p>${response}</p>`;
                aiChat.appendChild(aiMessageDiv);
                aiChatFull.appendChild(aiMessageDiv.cloneNode(true));
                
                // Scroll to bottom
                aiChat.scrollTop = aiChat.scrollHeight;
                aiChatFull.scrollTop = aiChatFull.scrollHeight;
            }, 1000);
        }

        function handleTranslation() {
            const text = textToTranslate.value.trim();
            const fromLang = document.getElementById('translateFrom').value;
            const toLang = document.getElementById('translateTo').value;
            
            if (text) {
                // In a real app, you would call a translation API
                // For demo purposes, we'll just show a placeholder translation
                const translatedText = `[Translated from ${fromLang} to ${toLang}] ${text}`;
                translationResult.textContent = translatedText;
            } else {
                alert('Please enter text to translate');
            }
        }

        function loadUserSettings() {
            const savedSettings = localStorage.getItem('travelPalSettings');
            if (savedSettings) {
                userSettings = JSON.parse(savedSettings);
                
                // Update UI with saved settings
                document.getElementById('notifications').checked = userSettings.notifications;
                document.getElementById('location').checked = userSettings.location;
                document.getElementById('darkMode').checked = userSettings.darkMode;
                document.getElementById('appLanguage').value = userSettings.language;
                document.getElementById('primaryContact').value = userSettings.primaryContact;
                document.getElementById('secondaryContact').value = userSettings.secondaryContact;
                document.getElementById('voiceCommands').checked = userSettings.voiceCommands;
            }
        }

        function saveUserSettings() {
            // Update userSettings object with current values
            userSettings.notifications = document.getElementById('notifications').checked;
            userSettings.location = document.getElementById('location').checked;
            userSettings.darkMode = document.getElementById('darkMode').checked;
            userSettings.language = document.getElementById('appLanguage').value;
            userSettings.primaryContact = document.getElementById('primaryContact').value;
            userSettings.secondaryContact = document.getElementById('secondaryContact').value;
            userSettings.voiceCommands = document.getElementById('voiceCommands').checked;
            
            // Save to localStorage
            localStorage.setItem('travelPalSettings', JSON.stringify(userSettings));
            
            alert('Settings saved successfully!');
        }

        function generateAIPlan() {
            const destination = document.getElementById('destination').value;
            const travelDates = document.getElementById('travelDates').value;
            const travelers = document.getElementById('travelers').value;
            const budget = document.getElementById('budget').value;
            const travelStyle = document.getElementById('travelStyle').value;
            const specialRequests = document.getElementById('specialRequests').value;
            
            if (!destination) {
                alert('Please enter a destination');
                return;
            }
            
            // Show loading state
            aiPlanResult.style.display = 'block';
            aiPlanResult.innerHTML = '<p>Generating your personalized travel plan...</p>';
            
            // Simulate AI processing
            setTimeout(() => {
                const plan = `
                    <div class="feature-detail">
                        <h3><i class="fas fa-map-marked-alt"></i> Your ${destination} Travel Plan</h3>
                        <p>Based on your preferences for ${travelStyle} travel with a ${budget} budget for ${travelers} travelers.</p>
                    </div>
                    <div class="plan-day">
                        <h4>Day 1: Arrival and Exploration</h4>
                        <ul>
                            <li>Check into your accommodation</li>
                            <li>Explore the local neighborhood</li>
                            <li>Enjoy a welcome dinner at a recommended local restaurant</li>
                        </ul>
                    </div>
                    <div class="plan-day">
                        <h4>Day 2: Main Attractions</h4>
                        <ul>
                            <li>Visit the top landmarks and attractions</li>
                            <li>Take a guided tour to learn about the history and culture</li>
                            <li>Experience local cuisine for lunch</li>
                        </ul>
                    </div>
                    <div class="plan-day">
                        <h4>Day 3: Cultural Immersion</h4>
                        <ul>
                            <li>Visit museums and cultural sites</li>
                            <li>Participate in a local workshop or activity</li>
                            <li>Enjoy an evening performance or show</li>
                        </ul>
                    </div>
                    <div class="expense-total">
                        <span>Estimated Cost:</span>
                        <span>₹${budget === 'budget' ? '8,000' : budget === 'moderate' ? '18,000' : '30,000'}</span>
                    </div>
                    <button class="action-button">
                        <i class="fas fa-save"></i> Save This Plan
                    </button>
                `;
                
                aiPlanResult.innerHTML = plan;
            }, 2000);
        }

        function saveBudget() {
            const accommodationBudget = document.getElementById('accommodationBudget').value;
            const foodBudget = document.getElementById('foodBudget').value;
            const activitiesBudget = document.getElementById('activitiesBudget').value;
            const totalBudget = document.getElementById('totalBudget').value;
            
            // Update budget display
            accommodationBudgetText.textContent = `₹0 / ₹${accommodationBudget}`;
            foodBudgetText.textContent = `₹0 / ₹${foodBudget}`;
            activitiesBudgetText.textContent = `₹0 / ₹${activitiesBudget}`;
            totalBudgetText.textContent = `₹0 / ₹${totalBudget}`;
            
            // Reset progress bars
            accommodationProgress.style.width = '0%';
            foodProgress.style.width = '0%';
            activitiesProgress.style.width = '0%';
            
            // Close modal
            budgetModal.style.display = 'none';
            
            alert('Budget updated successfully!');
        }

        function saveExpense() {
            const description = document.getElementById('expenseDescription').value;
            const category = document.getElementById('expenseCategory').value;
            const amount = document.getElementById('expenseAmount').value;
            const date = document.getElementById('expenseDate').value;
            
            if (!description || !amount || !date) {
                alert('Please fill in all fields');
                return;
            }
            
            // Update expense items
            expenseItems.innerHTML = `
                <div class="expense-item">
                    <div class="expense-category">
                        <i class="fas fa-${getExpenseIcon(category)}"></i>
                        <span>${description}</span>
                    </div>
                    <div class="expense-amount">₹${amount}</div>
                </div>
            `;
            
            // Update expense history
            const expenseItem = document.createElement('div');
            expenseItem.className = 'expense-history-item';
            expenseItem.innerHTML = `
                <div class="expense-history-category">
                    <i class="fas fa-${getExpenseIcon(category)}"></i>
                    <span>${description}</span>
                </div>
                <div class="expense-history-amount">₹${amount}</div>
            `;
            expenseHistoryList.prepend(expenseItem);
            
            // Update budget progress (simplified for demo)
            if (category === 'accommodation') {
                accommodationProgress.style.width = '30%';
                accommodationBudgetText.textContent = `₹${amount} / ₹5,000`;
            } else if (category === 'food') {
                foodProgress.style.width = '20%';
                foodBudgetText.textContent = `₹${amount} / ₹3,000`;
            } else if (category === 'activities') {
                activitiesProgress.style.width = '15%';
                activitiesBudgetText.textContent = `₹${amount} / ₹2,000`;
            }
            
            // Close modal
            expenseModal.style.display = 'none';
            
            alert('Expense added successfully!');
        }

        function updateBudgetDisplay() {
            // Reset budget display for new destination
            accommodationBudgetText.textContent = '₹0 / ₹0';
            foodBudgetText.textContent = '₹0 / ₹0';
            activitiesBudgetText.textContent = '₹0 / ₹0';
            totalBudgetText.textContent = '₹0 / ₹0';
            
            accommodationProgress.style.width = '0%';
            foodProgress.style.width = '0%';
            activitiesProgress.style.width = '0%';
        }

        function getDirections() {
            const destination = this.getAttribute('data-destination');
            const place = this.getAttribute('data-place');
            
            // Open Google Maps with directions to the place
            const url = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(place + ', ' + destination)}`;
            window.open(url, '_blank');
        }

        function handleBookingOption(optionType) {
            switch(optionType) {
                case 'bookFlights':
                    flightSearchSection.style.display = 'block';
                    hotelBookingSection.style.display = 'none';
                    transportSection.style.display = 'none';
                    break;
                case 'bookHotels':
                    hotelBookingSection.style.display = 'block';
                    flightSearchSection.style.display = 'none';
                    transportSection.style.display = 'none';
                    loadHotels(currentUserDestination || 'India');
                    break;
                case 'bookActivities':
                    alert('Opening activities booking...');
                    // In a real app, this would open an activities booking interface
                    break;
                case 'bookTransport':
                    transportSection.style.display = 'block';
                    flightSearchSection.style.display = 'none';
                    hotelBookingSection.style.display = 'none';
                    break;
            }
        }

        // Interactive Map Functionality
        let map, exploreMap;

        function updateMap(destination, containerId) {
            const container = document.getElementById(containerId);
            const placeholder = container.querySelector('.map-placeholder');
            
            // Remove existing map if it exists
            if (containerId === 'mapContainer' && map) {
                map.remove();
            } else if (containerId === 'exploreMapContainer' && exploreMap) {
                exploreMap.remove();
            }
            
            // Hide placeholder and show map
            placeholder.style.display = 'none';
            
            // Coordinates for popular destinations
            const coordinates = {
                'Paris': [48.8566, 2.3522],
                'Tokyo': [35.6762, 139.6503],
                'London': [51.5074, -0.1278],
                'New York': [40.7128, -74.0060],
                'Rome': [41.9028, 12.4964],
                'India': [20.5937, 78.9629]
            };
            
            const coords = coordinates[destination] || coordinates['India'];
            
            // Create new map
            if (containerId === 'mapContainer') {
                map = L.map(container).setView(coords, 12);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '© OpenStreetMap contributors'
                }).addTo(map);
                
                // Add marker
                L.marker(coords).addTo(map)
                    .bindPopup(`<b>${destination}</b><br>Your current destination`)
                    .openPopup();
            } else {
                exploreMap = L.map(container).setView(coords, 12);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '© OpenStreetMap contributors'
                }).addTo(exploreMap);
                
                // Add marker
                L.marker(coords).addTo(exploreMap)
                    .bindPopup(`<b>${destination}</b><br>Explore this destination`)
                    .openPopup();
            }
        }

        // Set up map controls
        document.getElementById('zoomIn').addEventListener('click', function() {
            if (map) map.zoomIn();
        });

        document.getElementById('zoomOut').addEventListener('click', function() {
            if (map) map.zoomOut();
        });

        document.getElementById('currentLocation').addEventListener('click', function() {
            if (navigator.geolocation && map) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    map.setView([position.coords.latitude, position.coords.longitude], 13);
                });
            }
        });

        document.getElementById('exploreZoomIn').addEventListener('click', function() {
            if (exploreMap) exploreMap.zoomIn();
        });

        document.getElementById('exploreZoomOut').addEventListener('click', function() {
            if (exploreMap) exploreMap.zoomOut();
        });

        document.getElementById('exploreCurrentLocation').addEventListener('click', function() {
            if (navigator.geolocation && exploreMap) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    exploreMap.setView([position.coords.latitude, position.coords.longitude], 13);
                });
            }
        });
    </script>
</body>
</html>